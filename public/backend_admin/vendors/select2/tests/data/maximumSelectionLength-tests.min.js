module("Data adapters - Maximum selection length");var MaximumSelectionLength=require("select2/data/maximumSelectionLength");var $=require("jquery");var Options=require("select2/options");var Utils=require("select2/utils");function MaximumSelectionStub(){this.called=false;this.currentData=[]}MaximumSelectionStub.prototype.current=function(a){a(this.currentData)};MaximumSelectionStub.prototype.val=function(a){this.currentData.push(a)};MaximumSelectionStub.prototype.query=function(a,b){this.called=true};var MaximumSelectionData=Utils.Decorate(MaximumSelectionStub,MaximumSelectionLength);test("0 never displays the notice",function(a){var b=new Options({maximumSelectionLength:0});var c=new MaximumSelectionData(null,b);c.trigger=function(){a.ok(false,"No events should be triggered")};c.query({term:""});a.ok(c.called);c=new MaximumSelectionData(null,b);c.trigger=function(){a.ok(false,"No events should be triggered")};c.val("1");c.query({term:""});a.ok(c.called);c=new MaximumSelectionData(null,b);c.trigger=function(){a.ok(false,"No events should be triggered")};c.val("1");c.val("2");c.query({term:""});a.ok(c.called)});test("< 0 never displays the notice",function(a){var b=new Options({maximumSelectionLength:-1});var c=new MaximumSelectionData(null,b);c.trigger=function(){a.ok(false,"No events should be triggered")};c.query({term:""});a.ok(c.called);c=new MaximumSelectionData(null,b);c.trigger=function(){a.ok(false,"No events should be triggered")};c.val("1");c.query({term:""});a.ok(c.called);c=new MaximumSelectionData(null,b);c.trigger=function(){a.ok(false,"No events should be triggered")};c.val("1");c.val("2");c.query({term:""});a.ok(c.called)});test("triggers when >= 1 selection",function(a){var c=new Options({maximumSelectionLength:1});var b=new MaximumSelectionData(null,c);b.trigger=function(){a.ok(false,"No events should be triggered")};b.query({term:""});a.ok(b.called);b=new MaximumSelectionData(null,c);b.trigger=function(){a.ok(true,"The event should be triggered.")};b.val("1");b.query({term:""});a.ok(!b.called)});test("triggers when >= 2 selections",function(a){var b=new Options({maximumSelectionLength:2});var c=new MaximumSelectionData(null,b);c.trigger=function(){a.ok(false,"No events should be triggered")};c.query({term:""});a.ok(c.called);c=new MaximumSelectionData(null,b);c.trigger=function(){a.ok(false,"No events should be triggered")};c.val("1");c.query({term:""});a.ok(c.called);c=new MaximumSelectionData(null,b);c.trigger=function(){a.ok(true,"The event should be triggered.")};c.val("1");c.val("2");c.query({term:""});a.ok(!c.called)});