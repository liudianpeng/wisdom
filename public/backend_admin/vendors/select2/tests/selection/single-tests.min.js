module("Selection containers - Single");var SingleSelection=require("select2/selection/single");var $=require("jquery");var Options=require("select2/options");var Utils=require("select2/utils");var options=new Options({});test("display uses templateSelection",function(a){var e=false;var d=new Options({templateSelection:function(f){e=true;return f.text}});var c=new SingleSelection($("#qunit-fixture .single"),d);var b=c.display({text:"test"});a.ok(e);a.equal(b,"test")});test("templateSelection can addClass",function(a){var e=false;var d=new Options({templateSelection:function(h,g){e=true;g.addClass("testclass");return h.text}});var c=new SingleSelection($("#qunit-fixture .single"),d);var f=c.selectionContainer();var b=c.display({text:"test"},f);a.ok(e);a.equal(b,"test");a.ok(f.hasClass("testclass"))});test("empty update clears the selection",function(b){var c=new SingleSelection($("#qunit-fixture .single"),options);var a=c.render();var d=a.find(".select2-selection__rendered");d.text("testing");c.update([]);b.equal(d.text(),"")});test("update renders the data text",function(b){var c=new SingleSelection($("#qunit-fixture .single"),options);var a=c.render();var d=a.find(".select2-selection__rendered");c.update([{text:"test"}]);b.equal(d.text(),"test")});test("escapeMarkup is being used",function(b){var d=new SingleSelection($("#qunit-fixture .single"),options);var a=d.render();var e=a.find(".select2-selection__rendered");var c='<script>bad("stuff");<\/script>';d.update([{text:c}]);b.equal(e.text(),c,"The text should be escaped by default to prevent injection")});