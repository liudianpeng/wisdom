module("Dropdown - selectOnClose");var $=require("jquery");var Utils=require("select2/utils");var Options=require("select2/options");var SelectData=require("select2/data/select");var Results=require("select2/results");var SelectOnClose=require("select2/dropdown/selectOnClose");var ModifiedResults=Utils.Decorate(Results,SelectOnClose);var options=new Options({selectOnClose:true});test("will not trigger if no results were given",function(d){d.expect(0);var c=$("<select></select>");var a=new ModifiedResults(c,options,new SelectData(c));var e=a.render();var b=new MockContainer();a.bind(b,$("<div></div>"));a.on("select",function(){d.ok(false,"The select event should not have been triggered")});b.trigger("close")});test("will not trigger if the results list is empty",function(d){d.expect(1);var c=$("<select></select>");var a=new ModifiedResults(c,options,new SelectData(c));var e=a.render();var b=new MockContainer();a.bind(b,$("<div></div>"));a.on("select",function(){d.ok(false,"The select event should not have been triggered")});a.append({results:[]});d.equal(e.find("li").length,0,"There should not be any results in the dropdown");b.trigger("close")});test("will not trigger if no results here highlighted",function(d){d.expect(2);var c=$("<select></select>");var a=new ModifiedResults(c,options,new SelectData(c));var e=a.render();var b=new MockContainer();a.bind(b,$("<div></div>"));a.on("select",function(){d.ok(false,"The select event should not have been triggered")});a.append({results:[{id:"1",text:"Test"}]});d.equal(e.find("li").length,1,"There should be one result in the dropdown");d.equal($.trim(e.find("li").text()),"Test","The result should be the same as the one we appended");b.trigger("close")});test("will trigger if there is a highlighted result",function(d){d.expect(2);var c=$("<select></select>");var a=new ModifiedResults(c,options,new SelectData(c));var e=a.render();var b=new MockContainer();a.bind(b,$("<div></div>"));a.on("select",function(){d.ok(true,"The select event should have been triggered")});a.append({results:[{id:"1",text:"Test"}]});d.equal(e.find("li").length,1,"There should be one result in the dropdown");e.find("li").addClass("select2-results__option--highlighted");b.trigger("close")});