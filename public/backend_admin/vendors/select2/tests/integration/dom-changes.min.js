module("DOM integration");test("adding a new unselected option changes nothing",function(b){var f=4;if(window.MutationObserver){f=2}else{if(!window.addEventListener){f=2}}b.expect(f);var j=null;var i=b.async();if(f!=2){j=b.async()}var e=require("jquery");var g=require("select2/options");var c=require("select2/core");var d=e("<select><option>One</option><option>Two</option></select>");e("#qunit-fixture").append(d);var h=new c(d);h.on("selection:update",function(k){b.equal(k.data.length,1,"There was more than one selection");b.equal(k.data[0].id,"One","The selection changed to something other than One");if(f!=2){j()}});b.equal(d.val(),"One");var a=e("<option>Three</option>");d.append(a);b.equal(d.val(),"One");i()});test("adding a new selected option changes the value",function(b){var f=4;if(!window.MutationObserver&&!window.addEventListener){f=2}b.expect(f);var j=null;var i=b.async();if(f!=2){j=b.async()}var e=require("jquery");var g=require("select2/options");var c=require("select2/core");var d=e("<select><option>One</option><option>Two</option></select>");e("#qunit-fixture").append(d);var h=new c(d);h.on("selection:update",function(k){b.equal(k.data.length,1,"There was more than one selection");b.equal(k.data[0].id,"Three","The selection did not change to Three");if(f!=2){j()}});b.equal(d.val(),"One");var a=e("<option selected>Three</option>");d.append(a);b.equal(d.val(),"Three");i()});test("removing an unselected option changes nothing",function(a){var e=4;if(!window.MutationObserver&&!window.addEventListener){e=2}a.expect(e);var i=null;var h=a.async();if(e!=2){i=a.async()}var d=require("jquery");var f=require("select2/options");var b=require("select2/core");var c=d("<select><option>One</option><option>Two</option></select>");d("#qunit-fixture").append(c);var g=new b(c);g.on("selection:update",function(j){a.equal(j.data.length,1,"There was more than one selection");a.equal(j.data[0].id,"One","The selection changed to something other than One");if(e!=2){i()}});a.equal(c.val(),"One");c.children().eq(1).remove();a.equal(c.val(),"One");h()});test("removing a selected option changes the value",function(a){var e=3;if(!window.MutationObserver&&!window.addEventListener){e=2}a.expect(e);var i=null;var h=a.async();if(e!=2){i=a.async()}var d=require("jquery");var f=require("select2/options");var b=require("select2/core");var c=d("<select><option>One</option><option>Two</option></select>");d("#qunit-fixture").append(c);var g=new b(c);g.on("selection:update",function(j){a.equal(j.data.length,1,"There was more than one selection");if(e!=2){i()}});a.equal(c.val(),"One");c.children().eq(0).remove();a.equal(c.val(),"Two");h()});