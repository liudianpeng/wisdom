(function(b){if(typeof define==="function"&&define.amd){define(["jquery","datatables.net","datatables.net-buttons"],function(a){return b(a,window,document)})}else{if(typeof exports==="object"){module.exports=function(a,d){if(!a){a=window}if(!d||!d.fn.dataTable){d=require("datatables.net")(a,d).$}if(!d.fn.dataTable.Buttons){require("datatables.net-buttons")(a,d)}return b(d,a,a.document)}}else{b(jQuery,window,document)}}}(function(i,f,g,h){var j=i.fn.dataTable;i.extend(j.ext.buttons,{colvis:function(a,b){return{extend:"collection",text:function(c){return c.i18n("buttons.colvis","Column visibility")},className:"buttons-colvis",buttons:[{extend:"columnsToggle",columns:b.columns}]}},columnsToggle:function(a,c){var b=a.columns(c.columns).indexes().map(function(d){return{extend:"columnToggle",columns:d}}).toArray();return b},columnToggle:function(a,b){return{extend:"columnVisibility",columns:b.columns}},columnsVisibility:function(a,c){var b=a.columns(c.columns).indexes().map(function(d){return{extend:"columnVisibility",columns:d,visibility:c.visibility}}).toArray();return b},columnVisibility:{columns:h,text:function(a,b,c){return c._columnText(a,c.columns)},className:"buttons-columnVisibility",action:function(a,c,d,e){var l=c.columns(e.columns);var b=l.visible();l.visible(e.visibility!==h?e.visibility:!(b.length?b[0]:false))},init:function(a,c,d){var b=this;var e=a.column(d.columns);a.on("column-visibility.dt"+d.namespace,function(m,n){if(!n.bDestroying){b.active(e.visible())}}).on("column-reorder.dt"+d.namespace,function(r,o,p){if(a.columns(d.columns).count()!==1){return}if(typeof d.columns==="number"){d.columns=p.mapping[d.columns]}var q=a.column(d.columns);b.text(d._columnText(a,d.columns));b.active(q.visible())});this.active(e.visible())},destroy:function(a,b,c){a.off("column-visibility.dt"+c.namespace).off("column-reorder.dt"+c.namespace)},_columnText:function(a,b){var c=a.column(b).index();return a.settings()[0].aoColumns[c].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,"")}},colvisRestore:{className:"buttons-colvisRestore",text:function(a){return a.i18n("buttons.colvisRestore","Restore visibility")},init:function(a,b,c){c._visOriginal=a.columns().indexes().map(function(d){return a.column(d).visible()}).toArray()},action:function(a,b,c,d){b.columns().every(function(e){var l=b.colReorder&&b.colReorder.transpose?b.colReorder.transpose(e,"toOriginal"):e;this.visible(d._visOriginal[l])})}},colvisGroup:{className:"buttons-colvisGroup",action:function(a,b,c,d){b.columns(d.show).visible(true,false);b.columns(d.hide).visible(false,false);b.columns.adjust()},show:[],hide:[]}});return j.Buttons}));