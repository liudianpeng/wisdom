JQVMap.prototype.makeDraggable=function(){var c=false;var e,d;var k=this;k.isMoving=false;k.isMovingTimeout=false;var f;var h;var g;var b;var a;var j;var i;this.container.mousemove(function(l){if(c){k.transX-=(e-l.pageX)/k.scale;k.transY-=(d-l.pageY)/k.scale;k.applyTransform();e=l.pageX;d=l.pageY;k.isMoving=true;if(k.isMovingTimeout){clearTimeout(k.isMovingTimeout)}k.container.trigger("drag")}return false}).mousedown(function(l){c=true;e=l.pageX;d=l.pageY;return false}).mouseup(function(){c=false;clearTimeout(k.isMovingTimeout);k.isMovingTimeout=setTimeout(function(){k.isMoving=false},100);return false}).mouseout(function(){if(c&&k.isMoving){clearTimeout(k.isMovingTimeout);k.isMovingTimeout=setTimeout(function(){c=false;k.isMoving=false},100);return false}});jQuery(this.container).bind("touchmove",function(n){var q;var p;var m=n.originalEvent.touches;var l;var o;if(m.length===1){if(f===1){if(j===m[0].pageX&&i===m[0].pageY){return}l=k.transX;o=k.transY;k.transX-=(j-m[0].pageX)/k.scale;k.transY-=(i-m[0].pageY)/k.scale;k.applyTransform();if(l!==k.transX||o!==k.transY){n.preventDefault()}k.isMoving=true;if(k.isMovingTimeout){clearTimeout(k.isMovingTimeout)}}j=m[0].pageX;i=m[0].pageY}else{if(m.length===2){if(f===2){p=Math.sqrt(Math.pow(m[0].pageX-m[1].pageX,2)+Math.pow(m[0].pageY-m[1].pageY,2))/b;k.setScale(a*p,h,g);n.preventDefault()}else{q=jQuery(k.container).offset();if(m[0].pageX>m[1].pageX){h=m[1].pageX+(m[0].pageX-m[1].pageX)/2}else{h=m[0].pageX+(m[1].pageX-m[0].pageX)/2}if(m[0].pageY>m[1].pageY){g=m[1].pageY+(m[0].pageY-m[1].pageY)/2}else{g=m[0].pageY+(m[1].pageY-m[0].pageY)/2}h-=q.left;g-=q.top;a=k.scale;b=Math.sqrt(Math.pow(m[0].pageX-m[1].pageX,2)+Math.pow(m[0].pageY-m[1].pageY,2))}}}f=m.length});jQuery(this.container).bind("touchstart",function(){f=0});jQuery(this.container).bind("touchend",function(){f=0})};