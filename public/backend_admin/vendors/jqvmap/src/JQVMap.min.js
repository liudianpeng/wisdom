var JQVMap=function(g){g=g||{};var e=this;var f=JQVMap.maps[g.map];var h;if(!f){throw new Error('Invalid "'+g.map+'" map parameter. Please make sure you have loaded this map file in your HTML.')}this.selectedRegions=[];this.multiSelectRegion=g.multiSelectRegion;this.container=g.container;this.defaultWidth=f.width;this.defaultHeight=f.height;this.color=g.color;this.selectedColor=g.selectedColor;this.hoverColor=g.hoverColor;this.hoverColors=g.hoverColors;this.hoverOpacity=g.hoverOpacity;this.setBackgroundColor(g.backgroundColor);this.width=g.container.width();this.height=g.container.height();this.resize();jQuery(window).resize(function(){var j=g.container.width();var i=g.container.height();if(j&&i){e.width=j;e.height=i;e.resize();e.canvas.setSize(e.width,e.height);e.applyTransform();var k=jQuery.Event("resize.jqvmap");jQuery(g.container).trigger(k,[j,i]);if(h){jQuery(".jqvmap-pin").remove();e.pinHandlers=false;e.placePins(h.pins,h.mode)}}});this.canvas=new VectorCanvas(this.width,this.height,g);g.container.append(this.canvas.canvas);this.makeDraggable();this.rootGroup=this.canvas.createGroup(true);this.index=JQVMap.mapIndex;this.label=jQuery("<div/>").addClass("jqvmap-label").appendTo(jQuery("body")).hide();if(g.enableZoom){jQuery("<div/>").addClass("jqvmap-zoomin").text("+").appendTo(g.container);jQuery("<div/>").addClass("jqvmap-zoomout").html("&#x2212;").appendTo(g.container)}e.countries=[];for(var b in f.paths){var d=this.canvas.createPath({path:f.paths[b].path});d.setFill(this.color);d.id=e.getCountryId(b);e.countries[b]=d;if(this.canvas.mode==="svg"){d.setAttribute("class","jqvmap-region")}else{jQuery(d).addClass("jqvmap-region")}jQuery(this.rootGroup).append(d)}jQuery(g.container).delegate(this.canvas.mode==="svg"?"path":"shape","mouseover mouseout",function(m){var j=m.target,k=m.target.id.split("_").pop(),i=jQuery.Event("labelShow.jqvmap"),l=jQuery.Event("regionMouseOver.jqvmap");k=k.toLowerCase();if(m.type==="mouseover"){jQuery(g.container).trigger(l,[k,f.paths[k].name]);if(!l.isDefaultPrevented()){e.highlight(k,j)}if(g.showTooltip){e.label.text(f.paths[k].name);jQuery(g.container).trigger(i,[e.label,k]);if(!i.isDefaultPrevented()){e.label.show();e.labelWidth=e.label.width();e.labelHeight=e.label.height()}}}else{e.unhighlight(k,j);e.label.hide();jQuery(g.container).trigger("regionMouseOut.jqvmap",[k,f.paths[k].name])}});jQuery(g.container).delegate(this.canvas.mode==="svg"?"path":"shape","click",function(i){var m=i.target;var k=i.target.id.split("_").pop();var j=jQuery.Event("regionClick.jqvmap");k=k.toLowerCase();jQuery(g.container).trigger(j,[k,f.paths[k].name]);if(!g.multiSelectRegion&&!j.isDefaultPrevented()){for(var l in f.paths){e.countries[l].currentFillColor=e.countries[l].getOriginalFill();e.countries[l].setFill(e.countries[l].getOriginalFill())}}if(!j.isDefaultPrevented()){if(e.isSelected(k)){e.deselect(k,m)}else{e.select(k,m)}}});if(g.showTooltip){g.container.mousemove(function(k){if(e.label.is(":visible")){var j=k.pageX-15-e.labelWidth;var i=k.pageY-15-e.labelHeight;if(j<0){j=k.pageX+15}if(i<0){i=k.pageY+15}e.label.css({left:j,top:i})}})}this.setColors(g.colors);this.canvas.canvas.appendChild(this.rootGroup);this.applyTransform();this.colorScale=new ColorScale(g.scaleColors,g.normalizeFunction,g.valueMin,g.valueMax);if(g.values){this.values=g.values;this.setValues(g.values)}if(g.selectedRegions){if(g.selectedRegions instanceof Array){for(var a in g.selectedRegions){this.select(g.selectedRegions[a].toLowerCase())}}else{this.select(g.selectedRegions.toLowerCase())}}this.bindZoomButtons();if(g.pins){h={pins:g.pins,mode:g.pinMode};this.pinHandlers=false;this.placePins(g.pins,g.pinMode)}if(g.showLabels){this.pinHandlers=false;var c={};for(b in e.countries){if(typeof e.countries[b]!=="function"){if(!g.pins||!g.pins[b]){c[b]=b.toUpperCase()}}}h={pins:c,mode:"content"};this.placePins(c,"content")}JQVMap.mapIndex++};JQVMap.prototype={transX:0,transY:0,scale:1,baseTransX:0,baseTransY:0,baseScale:1,width:0,height:0,countries:{},countriesColors:{},countriesData:{},zoomStep:1.4,zoomMaxStep:4,zoomCurStep:1};JQVMap.xlink="http://www.w3.org/1999/xlink";JQVMap.mapIndex=1;JQVMap.maps={};