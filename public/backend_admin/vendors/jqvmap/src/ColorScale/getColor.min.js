ColorScale.prototype.getColor=function(e){if(typeof this.normalize==="function"){e=this.normalize(e)}var h=[];var f=0;var a;for(var d=0;d<this.colors.length-1;d++){a=this.vectorLength(this.vectorSubtract(this.colors[d+1],this.colors[d]));h.push(a);f+=a}var g=(this.maxValue-this.minValue)/f;for(d=0;d<h.length;d++){h[d]*=g}d=0;e-=this.minValue;while(e-h[d]>=0){e-=h[d];d++}var b;if(d===this.colors.length-1){b=this.vectorToNum(this.colors[d]).toString(16)}else{b=(this.vectorToNum(this.vectorAdd(this.colors[d],this.vectorMult(this.vectorSubtract(this.colors[d+1],this.colors[d]),(e)/(h[d]))))).toString(16)}while(b.length<6){b="0"+b}return"#"+b};