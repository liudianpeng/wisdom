/*
 * Cropper v2.3.1
 * https://github.com/fengyuanchen/cropper
 *
 * Copyright (c) 2014-2016 Fengyuan Chen and contributors
 * Released under the MIT license
 *
 * Date: 2016-05-28T14:47:08.528Z
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(ap){function aD(a){return"number"==typeof a&&!isNaN(a)}function aH(a){return"undefined"==typeof a}function aq(a,c){var b=[];return aD(c)&&b.push(c),b.slice.apply(a,b)}function aM(b,a){var c=aq(arguments,2);return function(){return b.apply(a,c.concat(aq(arguments)))}}function ax(b){var a=b.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return a&&(a[1]!==bg.protocol||a[2]!==bg.hostname||a[3]!==bg.port)}function aE(b){var a="timestamp="+(new Date).getTime();return b+(-1===b.indexOf("?")?"?":"&")+a}function ay(a){return a?' crossOrigin="'+a+'"':""}function ar(b,a){var c;return b.naturalWidth&&!bm?a(b.naturalWidth,b.naturalHeight):(c=document.createElement("img"),c.onload=function(){a(this.width,this.height)},void (c.src=b.src))}function aw(c){var f=[],d=c.rotate,b=c.scaleX,g=c.scaleY;return aD(b)&&aD(g)&&f.push("scale("+b+","+g+")"),aD(d)&&f.push("rotate("+d+"deg)"),f.length?f.join(" "):"none"}function aA(u,j){var m,v,q=aP(u.degree)%180,d=(q>90?180-q:q)*Math.PI/180,k=aK(d),f=bl(d),b=u.width,c=u.height,g=u.aspectRatio;return j?(m=b/(f+k/g),v=m/g):(m=b*f+c*k,v=b*k+c*f),{width:m,height:v}}function aJ(H,q){var L,A,E,B=ap("<canvas>")[0],y=B.getContext("2d"),z=0,J=0,I=q.naturalWidth,F=q.naturalHeight,l=q.rotate,G=q.scaleX,D=q.scaleY,k=aD(G)&&aD(D)&&(1!==G||1!==D),j=aD(l)&&0!==l,i=j||k,t=I*aP(G||1),K=F*aP(D||1);return k&&(L=t/2,A=K/2),j&&(E=aA({width:t,height:K,degree:l}),t=E.width,K=E.height,L=t/2,A=K/2),B.width=t,B.height=K,i&&(z=-I/2,J=-F/2,y.save(),y.translate(L,A)),j&&y.rotate(l*Math.PI/180),k&&y.scale(G,D),y.drawImage(H,aV(z),aV(J),aV(I),aV(F)),i&&y.restore(),B}function aI(c){var f=c.length,d=0,b=0;return f&&(ap.each(c,function(e,a){d+=a.pageX,b+=a.pageY}),d/=f,b/=f),{pageX:d,pageY:b}}function aF(d,c,g){var f,b="";for(f=c,g+=c;g>f;f++){b+=aa(d.getUint8(f))}return b}function ao(y){var m,u,z,x,g,q,j,b,f,k,w=new bf(y),v=w.byteLength;if(255===w.getUint8(0)&&216===w.getUint8(1)){for(f=2;v>f;){if(255===w.getUint8(f)&&225===w.getUint8(f+1)){j=f;break}f++}}if(j&&(u=j+4,z=j+10,"Exif"===aF(w,u,4)&&(q=w.getUint16(z),g=18761===q,(g||19789===q)&&42===w.getUint16(z+2,g)&&(x=w.getUint32(z+4,g),x>=8&&(b=z+x)))),b){for(v=w.getUint16(b,g),k=0;v>k;k++){if(f=b+12*k+2,274===w.getUint16(f,g)){f+=8,m=w.getUint16(f,g),bm&&w.setUint16(f,1,g);break}}}return m}function aG(d){var c,j=d.replace(bc,""),g=atob(j),b=g.length,k=new bi(b),f=new aj(k);for(c=0;b>c;c++){f[c]=g.charCodeAt(c)}return k}function az(d){var c,g=new aj(d),f=g.length,b="";for(c=0;f>c;c++){b+=aa(g[c])}return"data:image/jpeg;base64,"+bp(b)}function an(a,b){this.$element=ap(a),this.options=ap.extend({},an.DEFAULTS,ap.isPlainObject(b)&&b),this.isLoaded=!1,this.isBuilt=!1,this.isCompleted=!1,this.isRotated=!1,this.isCropped=!1,this.isDisabled=!1,this.isReplaced=!1,this.isLimited=!1,this.wheeling=!1,this.isImg=!1,this.originalUrl="",this.canvas=null,this.cropBox=null,this.init()}var al=ap(window),ak=ap(document),bg=window.location,aL=window.navigator,bi=window.ArrayBuffer,aj=window.Uint8Array,bf=window.DataView,bp=window.btoa,a7="cropper",aY="cropper-modal",aT="cropper-hide",aR="cropper-hidden",aB="cropper-invisible",a6="cropper-move",aU="cropper-crop",bb="cropper-disabled",a1="cropper-bg",ai="mousedown touchstart pointerdown MSPointerDown",a4="mousemove touchmove pointermove MSPointerMove",be="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",a3="wheel mousewheel DOMMouseScroll",aX="dblclick",ba="load."+a7,bd="error."+a7,aC="resize."+a7,bj="build."+a7,a0="built."+a7,a5="cropstart."+a7,aN="cropmove."+a7,av="cropend."+a7,aQ="crop."+a7,a8="zoom."+a7,a2=/e|w|s|n|se|sw|ne|nw|all|crop|move|zoom/,aW=/^data\:/,bc=/^data\:([^\;]+)\;base64,/,a9=/^data\:image\/jpeg.*;base64,/,aZ="preview",ag="action",bv="e",bn="w",bh="s",am="n",aO="se",aS="sw",bs="ne",ad="nw",br="all",af="crop",ac="move",bk="zoom",au="none",bq=ap.isFunction(ap("<canvas>")[0].getContext),bm=aL&&/safari/i.test(aL.userAgent)&&/apple computer/i.test(aL.vendor),ae=Number,ab=Math.min,bu=Math.max,aP=Math.abs,aK=Math.sin,bl=Math.cos,bo=Math.sqrt,ah=Math.round,aV=Math.floor,aa=String.fromCharCode;an.prototype={constructor:an,init:function(){var b,a=this.$element;if(a.is("img")){if(this.isImg=!0,this.originalUrl=b=a.attr("src"),!b){return}b=a.prop("src")}else{a.is("canvas")&&bq&&(b=a[0].toDataURL())}this.load(b)},trigger:function(a,c){var b=ap.Event(a,c);return this.$element.trigger(b),b},load:function(c){var f,d,b=this.options,g=this.$element;if(c&&(g.one(bj,b.build),!this.trigger(bj).isDefaultPrevented())){if(this.url=c,this.image={},!b.checkOrientation||!bi){return this.clone()}if(f=ap.proxy(this.read,this),aW.test(c)){return a9.test(c)?f(aG(c)):this.clone()}d=new XMLHttpRequest,d.onerror=d.onabort=ap.proxy(function(){this.clone()},this),d.onload=function(){f(this.response)},b.checkCrossOrigin&&ax(c)&&g.prop("crossOrigin")&&(c=aE(c)),d.open("get",c),d.responseType="arraybuffer",d.send()}},read:function(d){var c,j,g,b=this.options,k=ao(d),f=this.image;if(k>1){switch(this.url=az(d),k){case 2:j=-1;break;case 3:c=-180;break;case 4:g=-1;break;case 5:c=90,g=-1;break;case 6:c=90;break;case 7:c=90,j=-1;break;case 8:c=-90}}b.rotatable&&(f.rotate=c),b.scalable&&(f.scaleX=j,f.scaleY=g),this.clone()},clone:function(){var c,h,d=this.options,b=this.$element,f=this.url,g="";d.checkCrossOrigin&&ax(f)&&(g=b.prop("crossOrigin"),g?c=f:(g="anonymous",c=aE(f))),this.crossOrigin=g,this.crossOriginUrl=c,this.$clone=h=ap("<img"+ay(g)+' src="'+(c||f)+'">'),this.isImg?b[0].complete?this.start():b.one(ba,ap.proxy(this.start,this)):h.one(ba,ap.proxy(this.start,this)).one(bd,ap.proxy(this.stop,this)).addClass(aT).insertAfter(b)},start:function(){var a=this.$element,b=this.$clone;this.isImg||(b.off(bd,this.stop),a=b),ar(a[0],ap.proxy(function(c,d){ap.extend(this.image,{naturalWidth:c,naturalHeight:d,aspectRatio:c/d}),this.isLoaded=!0,this.build()},this))},stop:function(){this.$clone.remove(),this.$clone=null},build:function(){var c,g,f,b=this.options,j=this.$element,d=this.$clone;this.isLoaded&&(this.isBuilt&&this.unbuild(),this.$container=j.parent(),this.$cropper=c=ap(an.TEMPLATE),this.$canvas=c.find(".cropper-canvas").append(d),this.$dragBox=c.find(".cropper-drag-box"),this.$cropBox=g=c.find(".cropper-crop-box"),this.$viewBox=c.find(".cropper-view-box"),this.$face=f=g.find(".cropper-face"),j.addClass(aR).after(c),this.isImg||d.removeClass(aT),this.initPreview(),this.bind(),b.aspectRatio=bu(0,b.aspectRatio)||NaN,b.viewMode=bu(0,ab(3,ah(b.viewMode)))||0,b.autoCrop?(this.isCropped=!0,b.modal&&this.$dragBox.addClass(aY)):g.addClass(aR),b.guides||g.find(".cropper-dashed").addClass(aR),b.center||g.find(".cropper-center").addClass(aR),b.cropBoxMovable&&f.addClass(a6).data(ag,br),b.highlight||f.addClass(aB),b.background&&c.addClass(a1),b.cropBoxResizable||g.find(".cropper-line, .cropper-point").addClass(aR),this.setDragMode(b.dragMode),this.render(),this.isBuilt=!0,this.setData(b.data),j.one(a0,b.built),setTimeout(ap.proxy(function(){this.trigger(a0),this.isCompleted=!0},this),0))},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,this.isCompleted=!1,this.initialImage=null,this.initialCanvas=null,this.initialCropBox=null,this.container=null,this.canvas=null,this.cropBox=null,this.unbind(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)},render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.isCropped&&this.renderCropBox()},initContainer:function(){var b=this.options,a=this.$element,d=this.$container,c=this.$cropper;c.addClass(aR),a.removeClass(aR),c.css(this.container={width:bu(d.width(),ae(b.minContainerWidth)||200),height:bu(d.height(),ae(b.minContainerHeight)||100)}),a.addClass(aR),c.removeClass(aR)},initCanvas:function(){var q,w=this.options.viewMode,B=this.container,z=B.width,j=B.height,t=this.image,k=t.naturalWidth,b=t.naturalHeight,f=90===aP(t.rotate),m=f?b:k,y=f?k:b,x=m/y,v=z,A=j;j*x>z?3===w?v=j*x:A=z/x:3===w?A=z/x:v=j*x,q={naturalWidth:m,naturalHeight:y,aspectRatio:x,width:v,height:A},q.oldLeft=q.left=(z-v)/2,q.oldTop=q.top=(j-A)/2,this.canvas=q,this.isLimited=1===w||2===w,this.limitCanvas(!0,!0),this.initialImage=ap.extend({},t),this.initialCanvas=ap.extend({},q)},limitCanvas:function(C,q){var x,D,A,j,v=this.options,k=v.viewMode,b=this.container,f=b.width,m=b.height,z=this.canvas,y=z.aspectRatio,w=this.cropBox,B=this.isCropped&&w;C&&(x=ae(v.minCanvasWidth)||0,D=ae(v.minCanvasHeight)||0,k&&(k>1?(x=bu(x,f),D=bu(D,m),3===k&&(D*y>x?x=D*y:D=x/y)):x?x=bu(x,B?w.width:0):D?D=bu(D,B?w.height:0):B&&(x=w.width,D=w.height,D*y>x?x=D*y:D=x/y)),x&&D?D*y>x?D=x/y:x=D*y:x?D=x/y:D&&(x=D*y),z.minWidth=x,z.minHeight=D,z.maxWidth=1/0,z.maxHeight=1/0),q&&(k?(A=f-z.width,j=m-z.height,z.minLeft=ab(0,A),z.minTop=ab(0,j),z.maxLeft=bu(0,A),z.maxTop=bu(0,j),B&&this.isLimited&&(z.minLeft=ab(w.left,w.left+w.width-z.width),z.minTop=ab(w.top,w.top+w.height-z.height),z.maxLeft=w.left,z.maxTop=w.top,2===k&&(z.width>=f&&(z.minLeft=ab(0,A),z.maxLeft=bu(0,A)),z.height>=m&&(z.minTop=ab(0,j),z.maxTop=bu(0,j))))):(z.minLeft=-z.width,z.minTop=-z.height,z.maxLeft=f,z.maxTop=m))},renderCanvas:function(d){var c,j,g=this.canvas,b=this.image,k=b.rotate,f=b.naturalWidth,l=b.naturalHeight;this.isRotated&&(this.isRotated=!1,j=aA({width:b.width,height:b.height,degree:k}),c=j.width/j.height,c!==g.aspectRatio&&(g.left-=(j.width-g.width)/2,g.top-=(j.height-g.height)/2,g.width=j.width,g.height=j.height,g.aspectRatio=c,g.naturalWidth=f,g.naturalHeight=l,k%180&&(j=aA({width:f,height:l,degree:k}),g.naturalWidth=j.width,g.naturalHeight=j.height),this.limitCanvas(!0,!1))),(g.width>g.maxWidth||g.width<g.minWidth)&&(g.left=g.oldLeft),(g.height>g.maxHeight||g.height<g.minHeight)&&(g.top=g.oldTop),g.width=ab(bu(g.width,g.minWidth),g.maxWidth),g.height=ab(bu(g.height,g.minHeight),g.maxHeight),this.limitCanvas(!1,!0),g.oldLeft=g.left=ab(bu(g.left,g.minLeft),g.maxLeft),g.oldTop=g.top=ab(bu(g.top,g.minTop),g.maxTop),this.$canvas.css({width:g.width,height:g.height,left:g.left,top:g.top}),this.renderImage(),this.isCropped&&this.isLimited&&this.limitCropBox(!0,!0),d&&this.output()},renderImage:function(c){var f,d=this.canvas,b=this.image;b.rotate&&(f=aA({width:d.width,height:d.height,degree:b.rotate,aspectRatio:b.aspectRatio},!0)),ap.extend(b,f?{width:f.width,height:f.height,left:(d.width-f.width)/2,top:(d.height-f.height)/2}:{width:d.width,height:d.height,left:0,top:0}),this.$clone.css({width:b.width,height:b.height,marginLeft:b.left,marginTop:b.top,transform:aw(b)}),c&&this.output()},initCropBox:function(){var c=this.options,f=this.canvas,d=c.aspectRatio,b=ae(c.autoCropArea)||0.8,g={width:f.width,height:f.height};d&&(f.height*d>f.width?g.height=g.width/d:g.width=g.height*d),this.cropBox=g,this.limitCropBox(!0,!0),g.width=ab(bu(g.width,g.minWidth),g.maxWidth),g.height=ab(bu(g.height,g.minHeight),g.maxHeight),g.width=bu(g.minWidth,g.width*b),g.height=bu(g.minHeight,g.height*b),g.oldLeft=g.left=f.left+(f.width-g.width)/2,g.oldTop=g.top=f.top+(f.height-g.height)/2,this.initialCropBox=ap.extend({},g)},limitCropBox:function(A,q){var w,B,z,j,u=this.options,k=u.aspectRatio,b=this.container,f=b.width,m=b.height,y=this.canvas,x=this.cropBox,v=this.isLimited;A&&(w=ae(u.minCropBoxWidth)||0,B=ae(u.minCropBoxHeight)||0,w=ab(w,f),B=ab(B,m),z=ab(f,v?y.width:f),j=ab(m,v?y.height:m),k&&(w&&B?B*k>w?B=w/k:w=B*k:w?B=w/k:B&&(w=B*k),j*k>z?j=z/k:z=j*k),x.minWidth=ab(w,z),x.minHeight=ab(B,j),x.maxWidth=z,x.maxHeight=j),q&&(v?(x.minLeft=bu(0,y.left),x.minTop=bu(0,y.top),x.maxLeft=ab(f,y.left+y.width)-x.width,x.maxTop=ab(m,y.top+y.height)-x.height):(x.minLeft=0,x.minTop=0,x.maxLeft=f-x.width,x.maxTop=m-x.height))},renderCropBox:function(){var d=this.options,c=this.container,g=c.width,f=c.height,b=this.cropBox;(b.width>b.maxWidth||b.width<b.minWidth)&&(b.left=b.oldLeft),(b.height>b.maxHeight||b.height<b.minHeight)&&(b.top=b.oldTop),b.width=ab(bu(b.width,b.minWidth),b.maxWidth),b.height=ab(bu(b.height,b.minHeight),b.maxHeight),this.limitCropBox(!1,!0),b.oldLeft=b.left=ab(bu(b.left,b.minLeft),b.maxLeft),b.oldTop=b.top=ab(bu(b.top,b.minTop),b.maxTop),d.movable&&d.cropBoxMovable&&this.$face.data(ag,b.width===g&&b.height===f?ac:br),this.$cropBox.css({width:b.width,height:b.height,left:b.left,top:b.top}),this.isCropped&&this.isLimited&&this.limitCanvas(!0,!0),this.isDisabled||this.output()},output:function(){this.preview(),this.isCompleted?this.trigger(aQ,this.getData()):this.isBuilt||this.$element.one(a0,ap.proxy(function(){this.trigger(aQ,this.getData())},this))},initPreview:function(){var a,c=ay(this.crossOrigin),b=c?this.crossOriginUrl:this.url;this.$preview=ap(this.options.preview),this.$clone2=a=ap("<img"+c+' src="'+b+'">'),this.$viewBox.html(a),this.$preview.each(function(){var d=ap(this);d.data(aZ,{width:d.width(),height:d.height(),html:d.html()}),d.html("<img"+c+' src="'+b+'" style="display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;">')})},resetPreview:function(){this.$preview.each(function(){var a=ap(this),b=a.data(aZ);a.css({width:b.width,height:b.height}).html(b.html).removeData(aZ)})},preview:function(){var g=this.image,k=this.canvas,p=this.cropBox,m=p.width,c=p.height,j=g.width,d=g.height,b=p.left-k.left-g.left,f=p.top-k.top-g.top;this.isCropped&&!this.isDisabled&&(this.$clone2.css({width:j,height:d,marginLeft:-b,marginTop:-f,transform:aw(g)}),this.$preview.each(function(){var n=ap(this),h=n.data(aZ),q=h.width,o=h.height,i=q,a=o,l=1;m&&(l=q/m,a=c*l),c&&a>o&&(l=o/c,i=m*l,a=o),n.css({width:i,height:a}).find("img").css({width:j*l,height:d*l,marginLeft:-b*l,marginTop:-f*l,transform:aw(g)})}))},bind:function(){var a=this.options,c=this.$element,b=this.$cropper;ap.isFunction(a.cropstart)&&c.on(a5,a.cropstart),ap.isFunction(a.cropmove)&&c.on(aN,a.cropmove),ap.isFunction(a.cropend)&&c.on(av,a.cropend),ap.isFunction(a.crop)&&c.on(aQ,a.crop),ap.isFunction(a.zoom)&&c.on(a8,a.zoom),b.on(ai,ap.proxy(this.cropStart,this)),a.zoomable&&a.zoomOnWheel&&b.on(a3,ap.proxy(this.wheel,this)),a.toggleDragModeOnDblclick&&b.on(aX,ap.proxy(this.dblclick,this)),ak.on(a4,this._cropMove=aM(this.cropMove,this)).on(be,this._cropEnd=aM(this.cropEnd,this)),a.responsive&&al.on(aC,this._resize=aM(this.resize,this))},unbind:function(){var a=this.options,c=this.$element,b=this.$cropper;ap.isFunction(a.cropstart)&&c.off(a5,a.cropstart),ap.isFunction(a.cropmove)&&c.off(aN,a.cropmove),ap.isFunction(a.cropend)&&c.off(av,a.cropend),ap.isFunction(a.crop)&&c.off(aQ,a.crop),ap.isFunction(a.zoom)&&c.off(a8,a.zoom),b.off(ai,this.cropStart),a.zoomable&&a.zoomOnWheel&&b.off(a3,this.wheel),a.toggleDragModeOnDblclick&&b.off(aX,this.dblclick),ak.off(a4,this._cropMove).off(be,this._cropEnd),a.responsive&&al.off(aC,this._resize)},resize:function(){var c,g,f,b=this.options.restore,j=this.$container,d=this.container;!this.isDisabled&&d&&(f=j.width()/d.width,1===f&&j.height()===d.height||(b&&(c=this.getCanvasData(),g=this.getCropBoxData()),this.render(),b&&(this.setCanvasData(ap.each(c,function(a,h){c[a]=h*f})),this.setCropBoxData(ap.each(g,function(e,a){g[e]=a*f})))))},dblclick:function(){this.isDisabled||(this.$dragBox.hasClass(aU)?this.setDragMode(ac):this.setDragMode(af))},wheel:function(c){var f=c.originalEvent||c,d=ae(this.options.wheelZoomRatio)||0.1,b=1;this.isDisabled||(c.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(ap.proxy(function(){this.wheeling=!1},this),50),f.deltaY?b=f.deltaY>0?1:-1:f.wheelDelta?b=-f.wheelDelta/120:f.detail&&(b=f.detail>0?1:-1),this.zoom(-b*d,c)))},cropStart:function(c){var g,f,b=this.options,j=c.originalEvent,d=j&&j.touches,k=c;if(!this.isDisabled){if(d){if(g=d.length,g>1){if(!b.zoomable||!b.zoomOnTouch||2!==g){return}k=d[1],this.startX2=k.pageX,this.startY2=k.pageY,f=bk}k=d[0]}if(f=f||ap(k.target).data(ag),a2.test(f)){if(this.trigger(a5,{originalEvent:j,action:f}).isDefaultPrevented()){return}c.preventDefault(),this.action=f,this.cropping=!1,this.startX=k.pageX||j&&j.pageX,this.startY=k.pageY||j&&j.pageY,f===af&&(this.cropping=!0,this.$dragBox.addClass(aY))}}},cropMove:function(d){var c,j=this.options,g=d.originalEvent,b=g&&g.touches,k=d,f=this.action;if(!this.isDisabled){if(b){if(c=b.length,c>1){if(!j.zoomable||!j.zoomOnTouch||2!==c){return}k=b[1],this.endX2=k.pageX,this.endY2=k.pageY}k=b[0]}if(f){if(this.trigger(aN,{originalEvent:g,action:f}).isDefaultPrevented()){return}d.preventDefault(),this.endX=k.pageX||g&&g.pageX,this.endY=k.pageY||g&&g.pageY,this.change(k.shiftKey,f===bk?d:null)}}},cropEnd:function(b){var a=b.originalEvent,c=this.action;this.isDisabled||c&&(b.preventDefault(),this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(aY,this.isCropped&&this.options.modal)),this.action="",this.trigger(av,{originalEvent:a,action:c}))},change:function(y,I){var M,z,P=this.options,E=P.aspectRatio,J=this.action,F=this.container,B=this.canvas,D=this.cropBox,H=D.width,O=D.height,N=D.left,K=D.top,q=N+H,L=K+O,G=0,k=0,j=F.width,b=F.height,A=!0;switch(!E&&y&&(E=H&&O?H/O:1),this.limited&&(G=D.minLeft,k=D.minTop,j=G+ab(F.width,B.left+B.width),b=k+ab(F.height,B.top+B.height)),z={x:this.endX-this.startX,y:this.endY-this.startY},E&&(z.X=z.y*E,z.Y=z.x/E),J){case br:N+=z.x,K+=z.y;break;case bv:if(z.x>=0&&(q>=j||E&&(k>=K||L>=b))){A=!1;break}H+=z.x,E&&(O=H/E,K-=z.Y/2),0>H&&(J=bn,H=0);break;case am:if(z.y<=0&&(k>=K||E&&(G>=N||q>=j))){A=!1;break}O-=z.y,K+=z.y,E&&(H=O*E,N+=z.X/2),0>O&&(J=bh,O=0);break;case bn:if(z.x<=0&&(G>=N||E&&(k>=K||L>=b))){A=!1;break}H-=z.x,N+=z.x,E&&(O=H/E,K+=z.Y/2),0>H&&(J=bv,H=0);break;case bh:if(z.y>=0&&(L>=b||E&&(G>=N||q>=j))){A=!1;break}O+=z.y,E&&(H=O*E,N-=z.X/2),0>O&&(J=am,O=0);break;case bs:if(E){if(z.y<=0&&(k>=K||q>=j)){A=!1;break}O-=z.y,K+=z.y,H=O*E}else{z.x>=0?j>q?H+=z.x:z.y<=0&&k>=K&&(A=!1):H+=z.x,z.y<=0?K>k&&(O-=z.y,K+=z.y):(O-=z.y,K+=z.y)}0>H&&0>O?(J=aS,O=0,H=0):0>H?(J=ad,H=0):0>O&&(J=aO,O=0);break;case ad:if(E){if(z.y<=0&&(k>=K||G>=N)){A=!1;break}O-=z.y,K+=z.y,H=O*E,N+=z.X}else{z.x<=0?N>G?(H-=z.x,N+=z.x):z.y<=0&&k>=K&&(A=!1):(H-=z.x,N+=z.x),z.y<=0?K>k&&(O-=z.y,K+=z.y):(O-=z.y,K+=z.y)}0>H&&0>O?(J=aO,O=0,H=0):0>H?(J=bs,H=0):0>O&&(J=aS,O=0);break;case aS:if(E){if(z.x<=0&&(G>=N||L>=b)){A=!1;break}H-=z.x,N+=z.x,O=H/E}else{z.x<=0?N>G?(H-=z.x,N+=z.x):z.y>=0&&L>=b&&(A=!1):(H-=z.x,N+=z.x),z.y>=0?b>L&&(O+=z.y):O+=z.y}0>H&&0>O?(J=bs,O=0,H=0):0>H?(J=aO,H=0):0>O&&(J=ad,O=0);break;case aO:if(E){if(z.x>=0&&(q>=j||L>=b)){A=!1;break}H+=z.x,O=H/E}else{z.x>=0?j>q?H+=z.x:z.y>=0&&L>=b&&(A=!1):H+=z.x,z.y>=0?b>L&&(O+=z.y):O+=z.y}0>H&&0>O?(J=ad,O=0,H=0):0>H?(J=aS,H=0):0>O&&(J=bs,O=0);break;case ac:this.move(z.x,z.y),A=!1;break;case bk:this.zoom(function(f,d,h,g){var c=bo(f*f+d*d),l=bo(h*h+g*g);return(l-c)/c}(aP(this.startX-this.startX2),aP(this.startY-this.startY2),aP(this.endX-this.endX2),aP(this.endY-this.endY2)),I),this.startX2=this.endX2,this.startY2=this.endY2,A=!1;break;case af:if(!z.x||!z.y){A=!1;break}M=this.$cropper.offset(),N=this.startX-M.left,K=this.startY-M.top,H=D.minWidth,O=D.minHeight,z.x>0?J=z.y>0?aO:bs:z.x<0&&(N-=H,J=z.y>0?aS:ad),z.y<0&&(K-=O),this.isCropped||(this.$cropBox.removeClass(aR),this.isCropped=!0,this.limited&&this.limitCropBox(!0,!0))}A&&(D.width=H,D.height=O,D.left=N,D.top=K,this.action=J,this.renderCropBox()),this.startX=this.endX,this.startY=this.endY},crop:function(){this.isBuilt&&!this.isDisabled&&(this.isCropped||(this.isCropped=!0,this.limitCropBox(!0,!0),this.options.modal&&this.$dragBox.addClass(aY),this.$cropBox.removeClass(aR)),this.setCropBoxData(this.initialCropBox))},reset:function(){this.isBuilt&&!this.isDisabled&&(this.image=ap.extend({},this.initialImage),this.canvas=ap.extend({},this.initialCanvas),this.cropBox=ap.extend({},this.initialCropBox),this.renderCanvas(),this.isCropped&&this.renderCropBox())},clear:function(){this.isCropped&&!this.isDisabled&&(ap.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.isCropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),this.$dragBox.removeClass(aY),this.$cropBox.addClass(aR))},replace:function(b,a){!this.isDisabled&&b&&(this.isImg&&this.$element.attr("src",b),a?(this.url=b,this.$clone.attr("src",b),this.isBuilt&&this.$preview.find("img").add(this.$clone2).attr("src",b)):(this.isImg&&(this.isReplaced=!0),this.options.data=null,this.load(b)))},enable:function(){this.isBuilt&&(this.isDisabled=!1,this.$cropper.removeClass(bb))},disable:function(){this.isBuilt&&(this.isDisabled=!0,this.$cropper.addClass(bb))},destroy:function(){var a=this.$element;this.isLoaded?(this.isImg&&this.isReplaced&&a.attr("src",this.originalUrl),this.unbuild(),a.removeClass(aR)):this.isImg?a.off(ba,this.start):this.$clone&&this.$clone.remove(),a.removeData(a7)},move:function(b,a){var c=this.canvas;this.moveTo(aH(b)?b:c.left+ae(b),aH(a)?a:c.top+ae(a))},moveTo:function(c,d){var b=this.canvas,e=!1;aH(d)&&(d=c),c=ae(c),d=ae(d),this.isBuilt&&!this.isDisabled&&this.options.movable&&(aD(c)&&(b.left=c,e=!0),aD(d)&&(b.top=d,e=!0),e&&this.renderCanvas(!0))},zoom:function(b,a){var c=this.canvas;b=ae(b),b=0>b?1/(1-b):1+b,this.zoomTo(c.width*b/c.naturalWidth,a)},zoomTo:function(y,m){var v,z,x,f,q,j=this.options,b=this.canvas,d=b.width,k=b.height,w=b.naturalWidth,u=b.naturalHeight;if(y=ae(y),y>=0&&this.isBuilt&&!this.isDisabled&&j.zoomable){if(z=w*y,x=u*y,m&&(v=m.originalEvent),this.trigger(a8,{originalEvent:v,oldRatio:d/w,ratio:z/w}).isDefaultPrevented()){return}v?(f=this.$cropper.offset(),q=v.touches?aI(v.touches):{pageX:m.pageX||v.pageX||0,pageY:m.pageY||v.pageY||0},b.left-=(z-d)*((q.pageX-f.left-b.left)/d),b.top-=(x-k)*((q.pageY-f.top-b.top)/k)):(b.left-=(z-d)/2,b.top-=(x-k)/2),b.width=z,b.height=x,this.renderCanvas(!0)}},rotate:function(a){this.rotateTo((this.image.rotate||0)+ae(a))},rotateTo:function(a){a=ae(a),aD(a)&&this.isBuilt&&!this.isDisabled&&this.options.rotatable&&(this.image.rotate=a%360,this.isRotated=!0,this.renderCanvas(!0))},scale:function(c,d){var b=this.image,e=!1;aH(d)&&(d=c),c=ae(c),d=ae(d),this.isBuilt&&!this.isDisabled&&this.options.scalable&&(aD(c)&&(b.scaleX=c,e=!0),aD(d)&&(b.scaleY=d,e=!0),e&&this.renderImage(!0))},scaleX:function(a){var b=this.image.scaleY;this.scale(a,aD(b)?b:1)},scaleY:function(a){var b=this.image.scaleX;this.scale(aD(b)?b:1,a)},getData:function(c){var g,f,b=this.options,j=this.image,d=this.canvas,k=this.cropBox;return this.isBuilt&&this.isCropped?(f={x:k.left-d.left,y:k.top-d.top,width:k.width,height:k.height},g=j.width/j.naturalWidth,ap.each(f,function(h,e){e/=g,f[h]=c?ah(e):e})):f={x:0,y:0,width:0,height:0},b.rotatable&&(f.rotate=j.rotate||0),b.scalable&&(f.scaleX=j.scaleX||1,f.scaleY=j.scaleY||1),f},setData:function(i){var d,b,j,c=this.options,k=this.image,f=this.canvas,g={};ap.isFunction(i)&&(i=i.call(this.element)),this.isBuilt&&!this.isDisabled&&ap.isPlainObject(i)&&(c.rotatable&&aD(i.rotate)&&i.rotate!==k.rotate&&(k.rotate=i.rotate,this.isRotated=d=!0),c.scalable&&(aD(i.scaleX)&&i.scaleX!==k.scaleX&&(k.scaleX=i.scaleX,b=!0),aD(i.scaleY)&&i.scaleY!==k.scaleY&&(k.scaleY=i.scaleY,b=!0)),d?this.renderCanvas():b&&this.renderImage(),j=k.width/k.naturalWidth,aD(i.x)&&(g.left=i.x*j+f.left),aD(i.y)&&(g.top=i.y*j+f.top),aD(i.width)&&(g.width=i.width*j),aD(i.height)&&(g.height=i.height*j),this.setCropBoxData(g))},getContainerData:function(){return this.isBuilt?this.container:{}},getImageData:function(){return this.isLoaded?this.image:{}},getCanvasData:function(){var a=this.canvas,b={};return this.isBuilt&&ap.each(["left","top","width","height","naturalWidth","naturalHeight"],function(c,d){b[d]=a[d]}),b},setCanvasData:function(d){var c=this.canvas,b=c.aspectRatio;ap.isFunction(d)&&(d=d.call(this.$element)),this.isBuilt&&!this.isDisabled&&ap.isPlainObject(d)&&(aD(d.left)&&(c.left=d.left),aD(d.top)&&(c.top=d.top),aD(d.width)?(c.width=d.width,c.height=d.width/b):aD(d.height)&&(c.height=d.height,c.width=d.height*b),this.renderCanvas(!0))},getCropBoxData:function(){var b,a=this.cropBox;return this.isBuilt&&this.isCropped&&(b={left:a.left,top:a.top,width:a.width,height:a.height}),b||{}},setCropBoxData:function(f){var d,b,g=this.cropBox,c=this.options.aspectRatio;ap.isFunction(f)&&(f=f.call(this.$element)),this.isBuilt&&this.isCropped&&!this.isDisabled&&ap.isPlainObject(f)&&(aD(f.left)&&(g.left=f.left),aD(f.top)&&(g.top=f.top),aD(f.width)&&(d=!0,g.width=f.width),aD(f.height)&&(b=!0,g.height=f.height),c&&(d?g.height=g.width/c:b&&(g.width=g.height*c)),this.renderCropBox())},getCroppedCanvas:function(m){var u,x,w,f,q,j,b,c,k,v,t;return this.isBuilt&&bq?this.isCropped?(ap.isPlainObject(m)||(m={}),t=this.getData(),u=t.width,x=t.height,c=u/x,ap.isPlainObject(m)&&(q=m.width,j=m.height,q?(j=q/c,b=q/u):j&&(q=j*c,b=j/x)),w=aV(q||u),f=aV(j||x),k=ap("<canvas>")[0],k.width=w,k.height=f,v=k.getContext("2d"),m.fillColor&&(v.fillStyle=m.fillColor,v.fillRect(0,0,w,f)),v.drawImage.apply(v,function(){var G,z,D,g,A,r,e=aJ(this.$clone[0],this.image),y=e.width,C=e.height,F=this.canvas,B=[e],s=t.x+F.naturalWidth*(aP(t.scaleX||1)-1)/2,E=t.y+F.naturalHeight*(aP(t.scaleY||1)-1)/2;return -u>=s||s>y?s=G=D=A=0:0>=s?(D=-s,s=0,G=A=ab(y,u+s)):y>=s&&(D=0,G=A=ab(u,y-s)),0>=G||-x>=E||E>C?E=z=g=r=0:0>=E?(g=-E,E=0,z=r=ab(C,x+E)):C>=E&&(g=0,z=r=ab(x,C-E)),B.push(aV(s),aV(E),aV(G),aV(z)),b&&(D*=b,g*=b,A*=b,r*=b),A>0&&r>0&&B.push(aV(D),aV(g),aV(A),aV(r)),B}.call(this)),k):aJ(this.$clone[0],this.image):void 0},setAspectRatio:function(b){var a=this.options;this.isDisabled||aH(b)||(a.aspectRatio=bu(0,b)||NaN,this.isBuilt&&(this.initCropBox(),this.isCropped&&this.renderCropBox()))},setDragMode:function(b){var a,d,c=this.options;this.isLoaded&&!this.isDisabled&&(a=b===af,d=c.movable&&b===ac,b=a||d?b:au,this.$dragBox.data(ag,b).toggleClass(aU,a).toggleClass(a6,d),c.cropBoxMovable||this.$face.data(ag,b).toggleClass(aU,a).toggleClass(a6,d))}},an.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:0.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:0.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},an.setDefaults=function(a){ap.extend(an.DEFAULTS,a)},an.TEMPLATE='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>',an.other=ap.fn.cropper,ap.fn.cropper=function(c){var b,d=aq(arguments,1);return this.each(function(){var g,f,a=ap(this),i=a.data(a7);if(!i){if(/destroy/.test(c)){return}g=ap.extend({},a.data(),ap.isPlainObject(c)&&c),a.data(a7,i=new an(this,g))}"string"==typeof c&&ap.isFunction(f=i[c])&&(b=f.apply(i,d))}),aH(b)?this:b},ap.fn.cropper.Constructor=an,ap.fn.cropper.setDefaults=an.setDefaults,ap.fn.cropper.noConflict=function(){return ap.fn.cropper=an.other,this}});