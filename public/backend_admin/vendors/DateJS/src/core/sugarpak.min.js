(function(){var r=Date,h=r.prototype,n=Number.prototype;h._orient=+1;h._nth=null;h._is=false;h._same=false;h._isSecond=false;n._dateElement="days";h.next=function(){this._move=true;this._orient=+1;return this};r.next=function(){return r.today().next()};h.last=h.prev=h.previous=function(){this._move=true;this._orient=-1;return this};r.last=r.prev=r.previous=function(){return r.today().last()};h.is=function(){this._is=true;return this};h.same=function(){this._same=true;this._isSecond=false;return this};h.today=function(){return this.same().day()};h.weekday=function(){if(this._nth){return t("Weekday").call(this)}if(this._move){return this.addWeekdays(this._orient)}if(this._is){this._is=false;return(!this.is().sat()&&!this.is().sun())}return false};h.weekend=function(){if(this._is){this._is=false;return(this.is().sat()||this.is().sun())}return false};h.at=function(k){return(typeof k==="string")?r.parse(this.toString("d")+" "+k):this.set(k)};n.fromNow=n.after=function(k){var l={};l[this._dateElement]=this;return((!k)?new Date():k.clone()).add(l)};n.ago=n.before=function(k){var v={},l=(this._dateElement[this._dateElement.length-1]!=="s")?this._dateElement+"s":this._dateElement;v[l]=this*-1;return((!k)?new Date():k.clone()).add(v)};var f=("sunday monday tuesday wednesday thursday friday saturday").split(/\s/),i=("january february march april may june july august september october november december").split(/\s/),j=("Millisecond Second Minute Hour Day Week Month Year Quarter Weekday").split(/\s/),o=("Milliseconds Seconds Minutes Hours Date Week Month FullYear Quarter").split(/\s/),b=("final first second third fourth fifth").split(/\s/),u;h.toObject=function(){var l={};for(var k=0;k<j.length;k++){if(this["get"+o[k]]){l[j[k].toLowerCase()]=this["get"+o[k]]()}}return l};r.fromObject=function(k){k.week=null;return Date.today().set(k)};var t=function(k){return function(){if(this._is){this._is=false;return this.getDay()===k}if(this._move){this._move=null}if(this._nth!==null){if(this._isSecond){this.addSeconds(this._orient*-1)}this._isSecond=false;var v=this._nth;this._nth=null;var l=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(k,v);if(this>l){throw new RangeError(r.getDayName(k)+" does not occur "+v+" times in the month of "+r.getMonthName(l.getMonth())+" "+l.getFullYear()+".")}return this}return this.moveToDayOfWeek(k,this._orient)}};var g=function(k){return function(){var v=r.today(),l=k-v.getDay();if(k===0&&Date.CultureInfo.firstDayOfWeek===1&&v.getDay()!==0){l=l+7}return v.addDays(l)}};var c=function(k){return function(){if(this._is){this._is=false;return this.getMonth()===k}return this.moveToMonth(k,this._orient)}};var m=function(k){return function(){return r.today().set({month:k,day:1})}};var s=function(w,v,l){for(var k=0;k<w.length;k++){r[w[k].toUpperCase()]=r[w[k].toUpperCase().substring(0,3)]=k;r[w[k]]=r[w[k].substring(0,3)]=v(k);h[w[k]]=h[w[k].substring(0,3)]=l(k)}};s(f,g,t);s(i,m,c);var d=function(k){return function(){if(this._isSecond){this._isSecond=false;return this}if(this._same){this._same=this._is=false;var z=this.toObject(),y=(arguments[0]||new Date()).toObject(),x="",w=k.toLowerCase();w=(w[w.length-1]==="s")?w.substring(0,w.length-1):w;for(var l=(j.length-1);l>-1;l--){x=j[l].toLowerCase();if(z[x]!==y[x]){return false}if(w===x){break}}return true}if(k.substring(k.length-1)!=="s"){k+="s"}if(this._move){this._move=null}return this["add"+k](this._orient)}};var e=function(k){return function(){this._dateElement=k;return this}};for(var q=0;q<j.length;q++){u=j[q].toLowerCase();if(u!=="weekday"){h[u]=h[u+"s"]=d(j[q]);n[u]=n[u+"s"]=e(u+"s")}}h._ss=d("Second");var a=function(k){return function(l){if(this._same){return this._ss(arguments[0])}if(l||l===0){return this.moveToNthOccurrence(l,k)}this._nth=k;if(k===2&&(l===undefined||l===null)){this._isSecond=true;return this.addSeconds(this._orient)}return this}};for(var p=0;p<b.length;p++){h[b[p]]=(p===0)?a(-1):a(p)}}());