"use strict";var base64=require("./base64");var utf8=require("./utf8");var utils=require("./utils");var ZipEntries=require("./zipEntries");module.exports=function(f,b){var e,d,c,a;b=utils.extend(b||{},{base64:false,checkCRC32:false,optimizedBinaryString:false,createFolders:false,decodeFileName:utf8.utf8decode});if(b.base64){f=base64.decode(f)}d=new ZipEntries(f,b);e=d.files;for(c=0;c<e.length;c++){a=e[c];this.file(a.fileNameStr,a.decompressed,{binary:true,optimizedBinaryString:true,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:b.createFolders})}if(d.zipComment.length){this.comment=d.zipComment}return this};