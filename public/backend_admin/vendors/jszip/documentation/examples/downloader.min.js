jQuery(function(d){function f(){d("#result").removeClass().text("")}function e(g){f();d("#result").addClass("alert alert-success").text(g)}function a(g){f();d("#result").addClass("alert alert-danger").text(g)}function c(i,h,j){var g=d.Deferred();JSZipUtils.getBinaryContent(i,function(k,l){if(k){g.reject(k)}else{j.file(h,l,{binary:true});g.resolve(l)}});return g}if(!JSZip.support.blob){a("This demo works only with a recent browser !");return}var b=d("#download_form").on("submit",function(){f();var g=new JSZip();var h=[];d(this).find(":checked").each(function(){var k=d(this);var j=k.data("url");var i=j.replace(/.*\//g,"");h.push(c(j,i,g))});d.when.apply(d,h).done(function(){var i=g.generate({type:"blob"});saveAs(i,"example.zip");e("done !")}).fail(function(i){a(i)});return false})});