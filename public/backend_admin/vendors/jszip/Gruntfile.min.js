module.exports=function(c){var a=[{browserName:"iphone",platform:"OS X 10.8",version:"6"},{browserName:"iphone",platform:"OS X 10.10",version:"9.2"},{browserName:"android",platform:"Linux",version:"4.0"},{browserName:"android",platform:"Linux",version:"4.4"},{browserName:"android",platform:"Linux",version:"5.1"},{browserName:"firefox",platform:"Windows 10"},{browserName:"chrome",platform:"Windows 10"},{browserName:"internet explorer",platform:"XP",version:"7"},{browserName:"internet explorer",platform:"Windows 7",version:"8"},{browserName:"internet explorer",platform:"Windows 7",version:"9"},{browserName:"internet explorer",platform:"Windows 8",version:"10"},{browserName:"internet explorer",platform:"Windows 10",version:"11"},{browserName:"microsoftedge",platform:"Windows 10",version:"13.10586"},{browserName:"opera",platform:"Windows 2008",version:"12"},{browserName:"safari",platform:"OS X 10.8",version:"6"},{browserName:"safari",platform:"OS X 10.9",version:"7"},{browserName:"safari",platform:"OS X 10.10",version:"8"},{browserName:"safari",platform:"OS X 10.11",version:"9"}];var b=[];if(process.env.TRAVIS_PULL_REQUEST&&process.env.TRAVIS_PULL_REQUEST!="false"){b.push("pr"+process.env.TRAVIS_PULL_REQUEST)}else{if(process.env.TRAVIS_BRANCH){b.push(process.env.TRAVIS_BRANCH)}}c.initConfig({connect:{server:{options:{base:"",port:9999}}},"saucelabs-qunit":{all:{options:{urls:["http://127.0.0.1:9999/test/index.html"],tunnelTimeout:5,build:process.env.TRAVIS_JOB_ID,concurrency:3,browsers:a,testname:"qunit tests",tags:b}}},jshint:{options:{jshintrc:"./.jshintrc"},all:["./lib/*.js"]},browserify:{all:{files:{"dist/jszip.js":["lib/index.js"]},options:{browserifyOptions:{standalone:"JSZip",insertGlobalVars:{Buffer:function(){return'(typeof Buffer !== "undefined" ? Buffer : undefined)'}}},postBundleCB:function(g,h,e){var f=require("fs").readFileSync("lib/license_header.js");var d=h.toString().replace(/\/\/@ sourceMappingURL=raw..flate.min.js.map/g,"");e(g,f+d)}}}},uglify:{options:{report:"gzip",mangle:true,preserveComments:"some"},all:{src:"dist/jszip.js",dest:"dist/jszip.min.js"}}});c.loadNpmTasks("grunt-saucelabs");c.loadNpmTasks("grunt-contrib-connect");c.loadNpmTasks("grunt-browserify");c.loadNpmTasks("grunt-contrib-jshint");c.loadNpmTasks("grunt-contrib-uglify");if(process.env.SAUCE_USERNAME&&process.env.SAUCE_ACCESS_KEY){c.registerTask("test",["connect","saucelabs-qunit"])}else{c.registerTask("test",[])}c.registerTask("build",["browserify","uglify"]);c.registerTask("default",["jshint","build"])};