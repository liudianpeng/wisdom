VCanvas_vml=createClass(VCanvas_base,{init:function(b,a,d){var c;VCanvas_vml._super.init.call(this,b,a,d);if(d[0]){d=d[0]}$.data(d,"_jqs_vcanvas",this);this.canvas=document.createElement("span");$(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:b,height:a,margin:"0px",padding:"0px",verticalAlign:"top"});this._insert(this.canvas,d);this._calculatePixelDims(b,a,this.canvas);this.canvas.width=this.pixelWidth;this.canvas.height=this.pixelHeight;c='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>';this.canvas.insertAdjacentHTML("beforeEnd",c);this.group=$(this.canvas).children()[0];this.rendered=false;this.prerender=""},_drawShape:function(f,n,h,a,d){var j=[],g,m,l,e,k,b,c;for(c=0,b=n.length;c<b;c++){j[c]=""+(n[c][0])+","+(n[c][1])}g=j.splice(0,1);d=d===undefined?1:d;m=h===undefined?' stroked="false" ':' strokeWeight="'+d+'px" strokeColor="'+h+'" ';l=a===undefined?' filled="false"':' fillColor="'+a+'" filled="true" ';e=j[0]===j[j.length-1]?"x ":"";k='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+f+'" '+m+l+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+g+" l "+j.join(", ")+" "+e+'e"> </v:shape>';return k},_drawCircle:function(d,g,e,c,f,a,b){var j,i,h;g-=c;e-=c;j=f===undefined?' stroked="false" ':' strokeWeight="'+b+'px" strokeColor="'+f+'" ';i=a===undefined?' filled="false"':' fillColor="'+a+'" filled="true" ';h='<v:oval  id="jqsshape'+d+'" '+j+i+' style="position:absolute;top:'+e+"px; left:"+g+"px; width:"+(c*2)+"px; height:"+(c*2)+'px"></v:oval>';return h},_drawPieSlice:function(h,m,k,g,i,d,l,c){var j,b,a,f,e,p,o,n;if(i===d){return""}if((d-i)===(2*Math.PI)){i=0;d=(2*Math.PI)}b=m+Math.round(Math.cos(i)*g);a=k+Math.round(Math.sin(i)*g);f=m+Math.round(Math.cos(d)*g);e=k+Math.round(Math.sin(d)*g);if(b===f&&a===e){if((d-i)<Math.PI){return""}b=f=m+g;a=e=k}if(b===f&&a===e&&(d-i)<Math.PI){return""}j=[m-g,k-g,m+g,k+g,b,a,f,e];p=l===undefined?' stroked="false" ':' strokeWeight="1px" strokeColor="'+l+'" ';o=c===undefined?' filled="false"':' fillColor="'+c+'" filled="true" ';n='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+h+'" '+p+o+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+m+","+k+" wa "+j.join(", ")+' x e"> </v:shape>';return n},_drawRect:function(e,b,g,c,a,d,f){return this._drawShape(e,[[b,g],[b,g+a],[b+c,g+a],[b+c,g],[b,g]],d,f)},reset:function(){this.group.innerHTML=""},appendShape:function(a){var b=this["_draw"+a.type].apply(this,a.args);if(this.rendered){this.group.insertAdjacentHTML("beforeEnd",b)}else{this.prerender+=b}this.lastShapeId=a.id;return a.id},replaceWithShape:function(d,a){var c=$("#jqsshape"+d),b=this["_draw"+a.type].apply(this,a.args);c[0].outerHTML=b},replaceWithShapes:function(b,a){var e=$("#jqsshape"+b[0]),d="",f=a.length,c;for(c=0;c<f;c++){d+=this["_draw"+a[c].type].apply(this,a[c].args)}e[0].outerHTML=d;for(c=1;c<b.length;c++){$("#jqsshape"+b[c]).remove()}},insertAfterShape:function(d,a){var c=$("#jqsshape"+d),b=this["_draw"+a.type].apply(this,a.args);c[0].insertAdjacentHTML("afterEnd",b)},removeShapeId:function(b){var a=$("#jqsshape"+b);this.group.removeChild(a[0])},getShapeAt:function(b,a,d){var c=b.id.substr(8);return c},render:function(){if(!this.rendered){this.group.innerHTML=this.prerender;this.rendered=true}}});