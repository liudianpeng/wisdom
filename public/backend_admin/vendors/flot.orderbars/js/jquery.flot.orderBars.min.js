(function(b){function c(n){var i;var t;var x;var v;var l=1;var g=false;var u={};function d(E,C,D){var A=null;if(q(C)){j(C);w(E);r(E);s(C);if(t>=2){var z=o(C);var F=0;var B=h();if(typeof u[C.bars.order]==="undefined"){if(k(z)){u[C.bars.order]=-1*(m(i,z-1,Math.floor(t/2)-1))-B}else{u[C.bars.order]=m(i,Math.ceil(t/2),z-2)+B+v*2}}F=u[C.bars.order];A=e(D,C,F);D.points=A}}return A}function q(z){return z.bars!=null&&z.bars.show&&z.bars.order!=null}function w(C){var A=g?C.getPlaceholder().innerHeight():C.getPlaceholder().innerWidth();var B=g?y(C.getData(),1):y(C.getData(),0);var z=B[1]-B[0];l=z/A}function y(A,C){var B=new Array();for(var z=0;z<A.length;z++){B[0]=(A[z].data[0])?A[z].data[0][C]:null;B[1]=(A[z].data[A[z].data.length-1])?A[z].data[A[z].data.length-1][C]:null}return B}function r(z){i=f(z.getData());t=i.length}function f(A){var C=new Array();var B=[];for(var z=0;z<A.length;z++){if(A[z].bars.order!=null&&A[z].bars.show&&B.indexOf(A[z].bars.order)<0){B.push(A[z].bars.order);C.push(A[z])}}return C.sort(p)}function p(B,A){var z=B.bars.order;var C=A.bars.order;return((z<C)?-1:((z>C)?1:0))}function s(z){x=typeof z.bars.lineWidth!=="undefined"?z.bars.lineWidth:2;v=x*l}function j(z){if(z.bars.horizontal){g=true}}function o(A){var B=0;for(var z=0;z<i.length;++z){if(A==i[z]){B=z;break}}return B+1}function h(){var z=0;if(t%2!=0){z=(i[Math.ceil(t/2)].bars.barWidth)/2}return z}function k(z){return z<=Math.ceil(t/2)}function m(C,D,A){var z=0;for(var B=D;B<=A;B++){z+=C[B].bars.barWidth+v*2}return z}function e(E,D,z){var F=E.pointsize;var C=E.points;var A=0;for(var B=g?1:0;B<C.length;B+=F){C[B]+=z;D.data[A][3]=C[B];A++}return C}n.hooks.processDatapoints.push(d)}var a={series:{bars:{order:null}}};b.plot.plugins.push({init:c,options:a,name:"orderBars",version:"0.2"})})(jQuery);