var fs=require("fs");var gulp=require("gulp");var gutil=require("gulp-util");var concat=require("gulp-concat");var header=require("gulp-header");var autoprefixer=require("gulp-autoprefixer");var runSequence=require("run-sequence");var minify=require("gulp-cssnano");var rename=require("gulp-rename");var pkg=JSON.parse(fs.readFileSync("package.json"));var activatedAnimations=activateAnimations();var opts={destPath:"./",concatName:"animate.css",autoprefixer:{browsers:["last 2 versions"],cascade:false},minRename:{suffix:".min"},banner:['@charset "UTF-8";\n',"/*!"," * <%= name %> -<%= homepage %>"," * Version - <%= version %>"," * Licensed under the MIT license - http://opensource.org/licenses/MIT"," *"," * Copyright (c) <%= new Date().getFullYear() %> <%= author.name %>"," */\n\n"].join("\n")};gulp.task("default",function(){runSequence("createCSS","addHeader")});gulp.task("createCSS",function(){return gulp.src(activatedAnimations).pipe(concat(opts.concatName)).pipe(autoprefixer(opts.autoprefixer)).pipe(gulp.dest(opts.destPath)).pipe(rename(opts.minRename)).pipe(minify({reduceIdents:{keyframes:false}})).pipe(gulp.dest(opts.destPath))});gulp.task("addHeader",function(){return gulp.src("*.css").pipe(header(opts.banner,pkg)).pipe(gulp.dest(opts.destPath))});function activateAnimations(){var a=JSON.parse(fs.readFileSync("animate-config.json")),f,e,c,g=["source/_base.css"],d=0;for(f in a){if(a.hasOwnProperty(f)){e=a[f];for(var b=0;b<e.length;++b){g.push("source/"+f+"/"+e[b]+".css");d+=1}}}if(!d){gutil.log("No animations activated.")}else{gutil.log(d+(d>1?" animations":" animation")+" activated.")}return g};