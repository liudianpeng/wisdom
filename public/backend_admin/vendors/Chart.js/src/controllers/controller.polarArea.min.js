"use strict";module.exports=function(a){var b=a.helpers;a.defaults.polarArea={scale:{type:"radialLinear",lineArc:true},animation:{animateRotate:true,animateScale:true},aspectRatio:1,legendCallback:function(f){var h=[];h.push('<ul class="'+f.id+'-legend">');var g=f.data;var e=g.datasets;var j=g.labels;if(e.length){for(var d=0;d<e[0].data.length;++d){h.push('<li><span style="background-color:'+e[0].backgroundColor[d]+'">');if(j[d]){h.push(j[d])}h.push("</span></li>")}}h.push("</ul>");return h.join("")},legend:{labels:{generateLabels:function(d){var e=d.data;if(e.labels.length&&e.datasets.length){return e.labels.map(function(n,l){var q=d.getDatasetMeta(0);var j=e.datasets[0];var g=q.data[l];var f=g.custom||{};var h=b.getValueAtIndexOrDefault;var k=d.options.elements.arc;var p=f.backgroundColor?f.backgroundColor:h(j.backgroundColor,l,k.backgroundColor);var o=f.borderColor?f.borderColor:h(j.borderColor,l,k.borderColor);var m=f.borderWidth?f.borderWidth:h(j.borderWidth,l,k.borderWidth);return{text:n,fillStyle:p,strokeStyle:o,lineWidth:m,hidden:isNaN(j.data[l])||q.data[l].hidden,index:l}})}else{return[]}}},onClick:function(l,d){var f=d.index;var j=this.chart;var h,g,k;for(h=0,g=(j.data.datasets||[]).length;h<g;++h){k=j.getDatasetMeta(h);k.data[f].hidden=!k.data[f].hidden}j.update()}},tooltips:{callbacks:{title:function(){return""},label:function(d,e){return e.labels[d.index]+": "+d.yLabel}}}};a.controllers.polarArea=a.DatasetController.extend({dataElementType:a.elements.Arc,linkScales:b.noop,update:function c(h){var k=this;var e=k.chart;var g=e.chartArea;var j=this.getMeta();var f=e.options;var d=f.elements.arc;var i=Math.min(g.right-g.left,g.bottom-g.top);e.outerRadius=Math.max((i-d.borderWidth/2)/2,0);e.innerRadius=Math.max(f.cutoutPercentage?(e.outerRadius/100)*(f.cutoutPercentage):1,0);e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount();k.outerRadius=e.outerRadius-(e.radiusLength*k.index);k.innerRadius=k.outerRadius-e.radiusLength;j.count=k.countVisibleElements();b.each(j.data,function(m,l){k.updateElement(m,l,h)})},updateElement:function(j,f,y){var t=this;var p=t.chart;var z=p.chartArea;var m=t.getDataset();var o=p.options;var A=o.animation;var q=o.elements.arc;var d=j.custom||{};var B=p.scale;var g=b.getValueAtIndexOrDefault;var x=p.data.labels;var s=t.calculateCircumference(m.data[f]);var l=(z.left+z.right)/2;var k=(z.top+z.bottom)/2;var h=0;var n=t.getMeta();for(var v=0;v<f;++v){if(!isNaN(m.data[v])&&!n.data[v].hidden){++h}}var e=j.hidden?0:B.getDistanceFromCenterForValue(m.data[f]);var u=(-0.5*Math.PI)+(s*h);var r=u+(j.hidden?0:s);var w={x:l,y:k,innerRadius:0,outerRadius:A.animateScale?0:B.getDistanceFromCenterForValue(m.data[f]),startAngle:A.animateRotate?Math.PI*-0.5:u,endAngle:A.animateRotate?Math.PI*-0.5:r,backgroundColor:d.backgroundColor?d.backgroundColor:g(m.backgroundColor,f,q.backgroundColor),borderWidth:d.borderWidth?d.borderWidth:g(m.borderWidth,f,q.borderWidth),borderColor:d.borderColor?d.borderColor:g(m.borderColor,f,q.borderColor),label:g(x,f,x[f])};b.extend(j,{_datasetIndex:t.index,_index:f,_scale:B,_model:y?w:{x:l,y:k,innerRadius:0,outerRadius:e,startAngle:u,endAngle:r,backgroundColor:d.backgroundColor?d.backgroundColor:g(m.backgroundColor,f,q.backgroundColor),borderWidth:d.borderWidth?d.borderWidth:g(m.borderWidth,f,q.borderWidth),borderColor:d.borderColor?d.borderColor:g(m.borderColor,f,q.borderColor),label:g(x,f,x[f])}});j.pivot()},removeHoverStyle:function(d){a.DatasetController.prototype.removeHoverStyle.call(this,d,this.chart.options.elements.arc)},countVisibleElements:function(){var f=this.getDataset();var e=this.getMeta();var d=0;b.each(e.data,function(h,g){if(!isNaN(f.data[g])&&!h.hidden){d++}});return d},calculateCircumference:function(e){var d=this.getMeta().count;if(d>0&&!isNaN(e)){return(2*Math.PI)/d}else{return 0}}})};