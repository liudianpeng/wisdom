"use strict";module.exports=function(a){var b=a.helpers;a.defaults.line={showLines:true,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}};a.controllers.line=a.DatasetController.extend({datasetElementType:a.elements.Line,dataElementType:a.elements.Point,addElementAndReset:function(e){var f=this;var d=f.chart.options;a.DatasetController.prototype.addElementAndReset.call(f,e);if(d.showLines&&d.elements.line.tension!==0){f.updateBezierControlPoints()}},update:function c(k){var l=this;var n=l.getMeta();var p=n.dataset;var m=n.data||[];var o=l.chart.options;var j=o.elements.line;var f=l.getScaleForId(n.yAxisID);var h,e,g,d;if(o.showLines){g=l.getDataset();d=p.custom||{};if((g.tension!==undefined)&&(g.lineTension===undefined)){g.lineTension=g.tension}p._scale=f;p._datasetIndex=l.index;p._children=m;p._model={tension:d.tension?d.tension:b.getValueOrDefault(g.lineTension,j.tension),backgroundColor:d.backgroundColor?d.backgroundColor:(g.backgroundColor||j.backgroundColor),borderWidth:d.borderWidth?d.borderWidth:(g.borderWidth||j.borderWidth),borderColor:d.borderColor?d.borderColor:(g.borderColor||j.borderColor),borderCapStyle:d.borderCapStyle?d.borderCapStyle:(g.borderCapStyle||j.borderCapStyle),borderDash:d.borderDash?d.borderDash:(g.borderDash||j.borderDash),borderDashOffset:d.borderDashOffset?d.borderDashOffset:(g.borderDashOffset||j.borderDashOffset),borderJoinStyle:d.borderJoinStyle?d.borderJoinStyle:(g.borderJoinStyle||j.borderJoinStyle),fill:d.fill?d.fill:(g.fill!==undefined?g.fill:j.fill),scaleTop:f.top,scaleBottom:f.bottom,scaleZero:f.getBasePixel()};p.pivot()}for(h=0,e=m.length;h<e;++h){l.updateElement(m[h],h,k)}if(o.showLines&&j.tension!==0){l.updateBezierControlPoints()}},getPointBackgroundColor:function(d,f){var e=this.chart.options.elements.point.backgroundColor;var h=this.getDataset();var g=d.custom||{};if(g.backgroundColor){e=g.backgroundColor}else{if(h.pointBackgroundColor){e=b.getValueAtIndexOrDefault(h.pointBackgroundColor,f,e)}else{if(h.backgroundColor){e=h.backgroundColor}}}return e},getPointBorderColor:function(d,e){var h=this.chart.options.elements.point.borderColor;var g=this.getDataset();var f=d.custom||{};if(f.borderColor){h=f.borderColor}else{if(g.pointBorderColor){h=b.getValueAtIndexOrDefault(g.pointBorderColor,e,h)}else{if(g.borderColor){h=g.borderColor}}}return h},getPointBorderWidth:function(d,f){var e=this.chart.options.elements.point.borderWidth;var h=this.getDataset();var g=d.custom||{};if(g.borderWidth){e=g.borderWidth}else{if(h.pointBorderWidth){e=b.getValueAtIndexOrDefault(h.pointBorderWidth,f,e)}else{if(h.borderWidth){e=h.borderWidth}}}return e},updateElement:function(n,i,h){var j=this;var q=j.getMeta();var d=n.custom||{};var f=j.getDataset();var p=j.index;var m=f.data[i];var e=j.getScaleForId(q.yAxisID);var o=j.getScaleForId(q.xAxisID);var g=j.chart.options.elements.point;var l,k;if((f.radius!==undefined)&&(f.pointRadius===undefined)){f.pointRadius=f.radius}if((f.hitRadius!==undefined)&&(f.pointHitRadius===undefined)){f.pointHitRadius=f.hitRadius}l=o.getPixelForValue(m,i,p,j.chart.isCombo);k=h?e.getBasePixel():j.calculatePointY(m,i,p,j.chart.isCombo);n._xScale=o;n._yScale=e;n._datasetIndex=p;n._index=i;n._model={x:l,y:k,skip:d.skip||isNaN(l)||isNaN(k),radius:d.radius||b.getValueAtIndexOrDefault(f.pointRadius,i,g.radius),pointStyle:d.pointStyle||b.getValueAtIndexOrDefault(f.pointStyle,i,g.pointStyle),backgroundColor:j.getPointBackgroundColor(n,i),borderColor:j.getPointBorderColor(n,i),borderWidth:j.getPointBorderWidth(n,i),tension:q.dataset._model?q.dataset._model.tension:0,hitRadius:d.hitRadius||b.getValueAtIndexOrDefault(f.pointHitRadius,i,g.hitRadius)}},calculatePointY:function(m,j,n,d){var l=this;var k=l.chart;var o=l.getMeta();var e=l.getScaleForId(o.yAxisID);var h=0;var q=0;var g,f,p;if(e.options.stacked){for(g=0;g<n;g++){f=k.data.datasets[g];p=k.getDatasetMeta(g);if(p.type==="line"&&k.isDatasetVisible(g)){if(f.data[j]<0){q+=f.data[j]||0}else{h+=f.data[j]||0}}}if(m<0){return e.getPixelForValue(q+m)}else{return e.getPixelForValue(h+m)}}return e.getPixelForValue(m)},updateBezierControlPoints:function(){var l=this.getMeta();var k=this.chart.chartArea;var j=l.data||[];var h,g,d,f,e;for(h=0,g=j.length;h<g;++h){d=j[h];f=d._model;e=b.splineCurve(b.previousItem(j,h)._model,f,b.nextItem(j,h)._model,l.dataset._model.tension);f.controlPointPreviousX=Math.max(Math.min(e.previous.x,k.right),k.left);f.controlPointPreviousY=Math.max(Math.min(e.previous.y,k.bottom),k.top);f.controlPointNextX=Math.max(Math.min(e.next.x,k.right),k.left);f.controlPointNextY=Math.max(Math.min(e.next.y,k.bottom),k.top);d.pivot()}},draw:function(j){var h=this.getMeta();var g=h.data||[];var d=j||1;var f,e;for(f=0,e=g.length;f<e;++f){g[f].transition(d)}if(this.chart.options.showLines){h.dataset.transition(d).draw()}for(f=0,e=g.length;f<e;++f){g[f].draw()}},setHoverStyle:function(d){var h=this.chart.data.datasets[d._datasetIndex];var f=d._index;var g=d.custom||{};var e=d._model;e.radius=g.hoverRadius||b.getValueAtIndexOrDefault(h.pointHoverRadius,f,this.chart.options.elements.point.hoverRadius);e.backgroundColor=g.hoverBackgroundColor||b.getValueAtIndexOrDefault(h.pointHoverBackgroundColor,f,b.getHoverColor(e.backgroundColor));e.borderColor=g.hoverBorderColor||b.getValueAtIndexOrDefault(h.pointHoverBorderColor,f,b.getHoverColor(e.borderColor));e.borderWidth=g.hoverBorderWidth||b.getValueAtIndexOrDefault(h.pointHoverBorderWidth,f,e.borderWidth)},removeHoverStyle:function(d){var g=this;var i=g.chart.data.datasets[d._datasetIndex];var f=d._index;var h=d.custom||{};var e=d._model;if((i.radius!==undefined)&&(i.pointRadius===undefined)){i.pointRadius=i.radius}e.radius=h.radius||b.getValueAtIndexOrDefault(i.pointRadius,f,g.chart.options.elements.point.radius);e.backgroundColor=g.getPointBackgroundColor(d,f);e.borderColor=g.getPointBorderColor(d,f);e.borderWidth=g.getPointBorderWidth(d,f)}})};