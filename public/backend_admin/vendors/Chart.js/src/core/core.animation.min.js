"use strict";module.exports=function(a){var b=a.helpers;a.defaults.global.animation={duration:1000,easing:"easeOutQuart",onProgress:b.noop,onComplete:b.noop};a.Animation=a.Element.extend({currentStep:null,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null});a.animationService={frameDuration:17,animations:[],dropFrames:0,request:null,addAnimation:function(c,f,g,e){if(!e){c.animating=true}for(var d=0;d<this.animations.length;++d){if(this.animations[d].chartInstance===c){this.animations[d].animationObject=f;return}}this.animations.push({chartInstance:c,animationObject:f});if(this.animations.length===1){this.requestAnimationFrame()}},cancelAnimation:function(c){var d=b.findIndex(this.animations,function(e){return e.chartInstance===c});if(d!==-1){this.animations.splice(d,1);c.animating=false}},requestAnimationFrame:function(){var c=this;if(c.request===null){c.request=b.requestAnimFrame.call(window,function(){c.request=null;c.startDigest()})}},startDigest:function(){var g=Date.now();var d=0;if(this.dropFrames>1){d=Math.floor(this.dropFrames);this.dropFrames=this.dropFrames%1}var f=0;while(f<this.animations.length){if(this.animations[f].animationObject.currentStep===null){this.animations[f].animationObject.currentStep=0}this.animations[f].animationObject.currentStep+=1+d;if(this.animations[f].animationObject.currentStep>this.animations[f].animationObject.numSteps){this.animations[f].animationObject.currentStep=this.animations[f].animationObject.numSteps}this.animations[f].animationObject.render(this.animations[f].chartInstance,this.animations[f].animationObject);if(this.animations[f].animationObject.onAnimationProgress&&this.animations[f].animationObject.onAnimationProgress.call){this.animations[f].animationObject.onAnimationProgress.call(this.animations[f].chartInstance,this.animations[f])}if(this.animations[f].animationObject.currentStep===this.animations[f].animationObject.numSteps){if(this.animations[f].animationObject.onAnimationComplete&&this.animations[f].animationObject.onAnimationComplete.call){this.animations[f].animationObject.onAnimationComplete.call(this.animations[f].chartInstance,this.animations[f])}this.animations[f].chartInstance.animating=false;this.animations.splice(f,1)}else{++f}}var e=Date.now();var c=(e-g)/this.frameDuration;this.dropFrames+=c;if(this.animations.length>0){this.requestAnimationFrame()}}}};