"use strict";module.exports=function(b){var e=b.helpers;var c=b.defaults.global;var a={display:true,animate:true,lineArc:false,position:"chartArea",angleLines:{display:true,color:"rgba(0, 0, 0, 0.1)",lineWidth:1},ticks:{showLabelBackdrop:true,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2},pointLabels:{fontSize:10,callback:function(f){return f}}};var d=b.Scale.extend({getValueCount:function(){return this.chart.data.labels.length},setDimensions:function(){var f=this.options;this.width=this.maxWidth;this.height=this.maxHeight;this.xCenter=Math.round(this.width/2);this.yCenter=Math.round(this.height/2);var h=e.min([this.height,this.width]);var g=e.getValueOrDefault(f.ticks.fontSize,c.defaultFontSize);this.drawingArea=(f.display)?(h/2)-(g/2+f.ticks.backdropPaddingY):(h/2)},determineDataLimits:function(){this.min=null;this.max=null;e.each(this.chart.data.datasets,function(i,j){if(this.chart.isDatasetVisible(j)){var h=this.chart.getDatasetMeta(j);e.each(i.data,function(m,k){var l=+this.getRightValue(m);if(isNaN(l)||h.data[k].hidden){return}if(this.min===null){this.min=l}else{if(l<this.min){this.min=l}}if(this.max===null){this.max=l}else{if(l>this.max){this.max=l}}},this)}},this);if(this.options.ticks.beginAtZero){var f=e.sign(this.min);var g=e.sign(this.max);if(f<0&&g<0){this.max=0}else{if(f>0&&g>0){this.min=0}}}if(this.options.ticks.min!==undefined){this.min=this.options.ticks.min}else{if(this.options.ticks.suggestedMin!==undefined){this.min=Math.min(this.min,this.options.ticks.suggestedMin)}}if(this.options.ticks.max!==undefined){this.max=this.options.ticks.max}else{if(this.options.ticks.suggestedMax!==undefined){this.max=Math.max(this.max,this.options.ticks.suggestedMax)}}if(this.min===this.max){this.min--;this.max++}},buildTicks:function(){this.ticks=[];var l=e.getValueOrDefault(this.options.ticks.fontSize,c.defaultFontSize);var k=Math.min(this.options.ticks.maxTicksLimit?this.options.ticks.maxTicksLimit:11,Math.ceil(this.drawingArea/(1.5*l)));k=Math.max(2,k);var i=e.niceNum(this.max-this.min,false);var n=e.niceNum(i/(k-1),true);var h=Math.floor(this.min/n)*n;var m=Math.ceil(this.max/n)*n;var f=Math.ceil((m-h)/n);this.ticks.push(this.options.ticks.min!==undefined?this.options.ticks.min:h);for(var g=1;g<f;++g){this.ticks.push(h+(g*n))}this.ticks.push(this.options.ticks.max!==undefined?this.options.ticks.max:m);this.max=e.max(this.ticks);this.min=e.min(this.ticks);if(this.options.ticks.reverse){this.ticks.reverse();this.start=this.max;this.end=this.min}else{this.start=this.min;this.end=this.max}this.zeroLineIndex=this.ticks.indexOf(0)},convertTicksToLabels:function(){b.Scale.prototype.convertTicksToLabels.call(this);this.pointLabels=this.chart.data.labels.map(this.options.pointLabels.callback,this)},getLabelForIndex:function(f,g){return +this.getRightValue(this.chart.data.datasets[g].data[f])},fit:function(){var r=this.options.pointLabels;var q=e.getValueOrDefault(r.fontSize,c.defaultFontSize);var f=e.getValueOrDefault(r.fontStyle,c.defaultFontStyle);var n=e.getValueOrDefault(r.fontFamily,c.defaultFontFamily);var l=e.fontString(q,f,n);var w=e.min([(this.height/2-q-5),this.width/2]),z,v,j,p,o=this.width,t,k,A=0,g,u,h,s,x,m,y;this.ctx.font=l;for(v=0;v<this.getValueCount();v++){z=this.getPointPosition(v,w);j=this.ctx.measureText(this.pointLabels[v]?this.pointLabels[v]:"").width+5;if(v===0||v===this.getValueCount()/2){p=j/2;if(z.x+p>o){o=z.x+p;t=v}if(z.x-p<A){A=z.x-p;g=v}}else{if(v<this.getValueCount()/2){if(z.x+j>o){o=z.x+j;t=v}}else{if(v>this.getValueCount()/2){if(z.x-j<A){A=z.x-j;g=v}}}}}h=A;s=Math.ceil(o-this.width);k=this.getIndexAngle(t);u=this.getIndexAngle(g);x=s/Math.sin(k+Math.PI/2);m=h/Math.sin(u+Math.PI/2);x=(e.isNumber(x))?x:0;m=(e.isNumber(m))?m:0;this.drawingArea=Math.round(w-(m+x)/2);this.setCenterPoint(m,x)},setCenterPoint:function(i,f){var h=this.width-f-this.drawingArea,g=i+this.drawingArea;this.xCenter=Math.round(((g+h)/2)+this.left);this.yCenter=Math.round((this.height/2)+this.top)},getIndexAngle:function(g){var f=(Math.PI*2)/this.getValueCount();return g*f-(Math.PI/2)},getDistanceFromCenterForValue:function(g){if(g===null){return 0}var f=this.drawingArea/(this.max-this.min);if(this.options.reverse){return(this.max-g)*f}else{return(g-this.min)*f}},getPointPosition:function(g,h){var f=this.getIndexAngle(g);return{x:Math.round(Math.cos(f)*h)+this.xCenter,y:Math.round(Math.sin(f)*h)+this.yCenter}},getPointPositionForValue:function(f,g){return this.getPointPosition(f,this.getDistanceFromCenterForValue(g))},getBasePosition:function(){var h=this;var g=h.min;var f=h.max;return h.getPointPositionForValue(0,h.beginAtZero?0:g<0&&f<0?f:g>0&&f>0?g:0)},draw:function(){if(this.options.display){var t=this.ctx;e.each(this.ticks,function(B,z){if(z>0||this.options.reverse){var u=this.getDistanceFromCenterForValue(this.ticks[z]);var C=this.yCenter-u;if(this.options.gridLines.display){t.strokeStyle=this.options.gridLines.color;t.lineWidth=this.options.gridLines.lineWidth;if(this.options.lineArc){t.beginPath();t.arc(this.xCenter,this.yCenter,u,0,Math.PI*2);t.closePath();t.stroke()}else{t.beginPath();for(var y=0;y<this.getValueCount();y++){var F=this.getPointPosition(y,this.getDistanceFromCenterForValue(this.ticks[z]));if(y===0){t.moveTo(F.x,F.y)}else{t.lineTo(F.x,F.y)}}t.closePath();t.stroke()}}if(this.options.ticks.display){var w=e.getValueOrDefault(this.options.ticks.fontColor,c.defaultFontColor);var D=e.getValueOrDefault(this.options.ticks.fontSize,c.defaultFontSize);var E=e.getValueOrDefault(this.options.ticks.fontStyle,c.defaultFontStyle);var x=e.getValueOrDefault(this.options.ticks.fontFamily,c.defaultFontFamily);var v=e.fontString(D,E,x);t.font=v;if(this.options.ticks.showLabelBackdrop){var A=t.measureText(B).width;t.fillStyle=this.options.ticks.backdropColor;t.fillRect(this.xCenter-A/2-this.options.ticks.backdropPaddingX,C-D/2-this.options.ticks.backdropPaddingY,A+this.options.ticks.backdropPaddingX*2,D+this.options.ticks.backdropPaddingY*2)}t.textAlign="center";t.textBaseline="middle";t.fillStyle=w;t.fillText(B,this.xCenter,C)}}},this);if(!this.options.lineArc){t.lineWidth=this.options.angleLines.lineWidth;t.strokeStyle=this.options.angleLines.color;for(var l=this.getValueCount()-1;l>=0;l--){if(this.options.angleLines.display){var h=this.getPointPosition(l,this.getDistanceFromCenterForValue(this.options.reverse?this.min:this.max));t.beginPath();t.moveTo(this.xCenter,this.yCenter);t.lineTo(h.x,h.y);t.stroke();t.closePath()}var p=this.getPointPosition(l,this.getDistanceFromCenterForValue(this.options.reverse?this.min:this.max)+5);var m=e.getValueOrDefault(this.options.pointLabels.fontColor,c.defaultFontColor);var g=e.getValueOrDefault(this.options.pointLabels.fontSize,c.defaultFontSize);var j=e.getValueOrDefault(this.options.pointLabels.fontStyle,c.defaultFontStyle);var s=e.getValueOrDefault(this.options.pointLabels.fontFamily,c.defaultFontFamily);var k=e.fontString(g,j,s);t.font=k;t.fillStyle=m;var f=this.pointLabels.length,n=this.pointLabels.length/2,r=n/2,q=(l<r||l>f-r),o=(l===r||l===f-r);if(l===0){t.textAlign="center"}else{if(l===n){t.textAlign="center"}else{if(l<n){t.textAlign="left"}else{t.textAlign="right"}}}if(o){t.textBaseline="middle"}else{if(q){t.textBaseline="bottom"}else{t.textBaseline="top"}}t.fillText(this.pointLabels[l]?this.pointLabels[l]:"",p.x,p.y)}}}}});b.scaleService.registerScaleType("radialLinear",d,a)};