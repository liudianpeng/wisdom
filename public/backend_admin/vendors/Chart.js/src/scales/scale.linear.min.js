"use strict";module.exports=function(b){var d=b.helpers;var a={position:"left",ticks:{callback:function(g,i,j){var k=j.length>3?j[2]-j[1]:j[1]-j[0];if(Math.abs(k)>1){if(g!==Math.floor(g)){k=g-Math.floor(g)}}var e=d.log10(Math.abs(k));var h="";if(g!==0){var f=-1*Math.floor(e);f=Math.max(Math.min(f,20),0);h=g.toFixed(f)}else{h="0"}return h}}};var c=b.Scale.extend({determineDataLimits:function(){var n=this;var g=n.options;var m=g.ticks;var o=n.chart;var k=o.data;var i=k.datasets;var q=n.isHorizontal();function j(r){return q?r.xAxisID===n.id:r.yAxisID===n.id}n.min=null;n.max=null;if(g.stacked){var l={};var f=false;var p=false;d.each(i,function(u,v){var t=o.getDatasetMeta(v);if(l[t.type]===undefined){l[t.type]={positiveValues:[],negativeValues:[]}}var r=l[t.type].positiveValues;var s=l[t.type].negativeValues;if(o.isDatasetVisible(v)&&j(t)){d.each(u.data,function(y,w){var x=+n.getRightValue(y);if(isNaN(x)||t.data[w].hidden){return}r[w]=r[w]||0;s[w]=s[w]||0;if(g.relativePoints){r[w]=100}else{if(x<0){p=true;s[w]+=x}else{f=true;r[w]+=x}}})}});d.each(l,function(s){var t=s.positiveValues.concat(s.negativeValues);var r=d.min(t);var u=d.max(t);n.min=n.min===null?r:Math.min(n.min,r);n.max=n.max===null?u:Math.max(n.max,u)})}else{d.each(i,function(s,t){var r=o.getDatasetMeta(t);if(o.isDatasetVisible(t)&&j(r)){d.each(s.data,function(w,u){var v=+n.getRightValue(w);if(isNaN(v)||r.data[u].hidden){return}if(n.min===null){n.min=v}else{if(v<n.min){n.min=v}}if(n.max===null){n.max=v}else{if(v>n.max){n.max=v}}})}})}if(m.beginAtZero){var h=d.sign(n.min);var e=d.sign(n.max);if(h<0&&e<0){n.max=0}else{if(h>0&&e>0){n.min=0}}}if(m.min!==undefined){n.min=m.min}else{if(m.suggestedMin!==undefined){n.min=Math.min(n.min,m.suggestedMin)}}if(m.max!==undefined){n.max=m.max}else{if(m.suggestedMax!==undefined){n.max=Math.max(n.max,m.suggestedMax)}}if(n.min===n.max){n.max++;if(!m.beginAtZero){n.min--}}},buildTicks:function(){var m=this;var e=m.options;var k=e.ticks;var h=d.getValueOrDefault;var r=m.isHorizontal();var s=m.ticks=[];var n;if(r){n=Math.min(k.maxTicksLimit?k.maxTicksLimit:11,Math.ceil(m.width/50))}else{var t=h(k.fontSize,b.defaults.global.defaultFontSize);n=Math.min(k.maxTicksLimit?k.maxTicksLimit:11,Math.ceil(m.height/(2*t)))}n=Math.max(2,n);var p;var q=(k.fixedStepSize&&k.fixedStepSize>0)||(k.stepSize&&k.stepSize>0);if(q){p=h(k.fixedStepSize,k.stepSize)}else{var l=d.niceNum(m.max-m.min,false);p=d.niceNum(l/(n-1),true)}var f=Math.floor(m.min/p)*p;var o=Math.ceil(m.max/p)*p;var i=(o-f)/p;if(d.almostEquals(i,Math.round(i),p/1000)){i=Math.round(i)}else{i=Math.ceil(i)}s.push(k.min!==undefined?k.min:f);for(var g=1;g<i;++g){s.push(f+(g*p))}s.push(k.max!==undefined?k.max:o);if(!r){s.reverse()}m.max=d.max(s);m.min=d.min(s);if(k.reverse){s.reverse();m.start=m.max;m.end=m.min}else{m.start=m.min;m.end=m.max}},getLabelForIndex:function(e,f){return +this.getRightValue(this.chart.data.datasets[f].data[e])},convertTicksToLabels:function(){var e=this;e.ticksAsNumbers=e.ticks.slice();e.zeroLineIndex=e.ticks.indexOf(0);b.Scale.prototype.convertTicksToLabels.call(e)},getPixelForValue:function(o,m,p,j){var l=this;var h=l.paddingLeft;var g=l.paddingBottom;var f=l.start;var i=+l.getRightValue(o);var e;var n;var k=l.end-f;if(l.isHorizontal()){n=l.width-(h+l.paddingRight);e=l.left+(n/k*(i-f));return Math.round(e+h)}else{n=l.height-(l.paddingTop+g);e=(l.bottom-g)-(n/k*(i-f));return Math.round(e)}},getValueForPixel:function(f){var k=this;var j=k.isHorizontal();var e=k.paddingLeft;var h=k.paddingBottom;var g=j?k.width-(e+k.paddingRight):k.height-(k.paddingTop+h);var i=(j?f-k.left-e:k.bottom-h-f)/g;return k.start+((k.end-k.start)*i)},getPixelForTick:function(e,f){return this.getPixelForValue(this.ticksAsNumbers[e],null,null,f)}});b.scaleService.registerScaleType("linear",c,a)};