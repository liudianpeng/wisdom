"use strict";module.exports=function(b){var c=b.helpers;var a={position:"left",ticks:{callback:function(g,f,e){var h=g/(Math.pow(10,Math.floor(c.log10(g))));if(h===1||h===2||h===5||f===0||f===e.length-1){return g.toExponential()}else{return""}}}};var d=b.Scale.extend({determineDataLimits:function(){var l=this;var e=l.options;var k=e.ticks;var m=l.chart;var i=m.data;var g=i.datasets;var h=c.getValueOrDefault;var n=l.isHorizontal();function f(o){return n?o.xAxisID===l.id:o.yAxisID===l.id}l.min=null;l.max=null;if(e.stacked){var j={};c.each(g,function(p,q){var o=m.getDatasetMeta(q);if(m.isDatasetVisible(q)&&f(o)){if(j[o.type]===undefined){j[o.type]=[]}c.each(p.data,function(u,s){var r=j[o.type];var t=+l.getRightValue(u);if(isNaN(t)||o.data[s].hidden){return}r[s]=r[s]||0;if(e.relativePoints){r[s]=100}else{r[s]+=t}})}});c.each(j,function(p){var o=c.min(p);var q=c.max(p);l.min=l.min===null?o:Math.min(l.min,o);l.max=l.max===null?q:Math.max(l.max,q)})}else{c.each(g,function(p,q){var o=m.getDatasetMeta(q);if(m.isDatasetVisible(q)&&f(o)){c.each(p.data,function(t,r){var s=+l.getRightValue(t);if(isNaN(s)||o.data[r].hidden){return}if(l.min===null){l.min=s}else{if(s<l.min){l.min=s}}if(l.max===null){l.max=s}else{if(s>l.max){l.max=s}}})}})}l.min=h(k.min,l.min);l.max=h(k.max,l.max);if(l.min===l.max){if(l.min!==0&&l.min!==null){l.min=Math.pow(10,Math.floor(c.log10(l.min))-1);l.max=Math.pow(10,Math.floor(c.log10(l.max))+1)}else{l.min=1;l.max=10}}},buildTicks:function(){var j=this;var e=j.options;var i=e.ticks;var h=c.getValueOrDefault;var l=j.ticks=[];var m=h(i.min,Math.pow(10,Math.floor(c.log10(j.min))));while(m<j.max){l.push(m);var g=Math.floor(c.log10(m));var k=Math.floor(m/Math.pow(10,g))+1;if(k===10){k=1;++g}m=k*Math.pow(10,g)}var f=h(i.max,m);l.push(f);if(!j.isHorizontal()){l.reverse()}j.max=c.max(l);j.min=c.min(l);if(i.reverse){l.reverse();j.start=j.max;j.end=j.min}else{j.start=j.min;j.end=j.max}},convertTicksToLabels:function(){this.tickValues=this.ticks.slice();b.Scale.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,f){return +this.getRightValue(this.chart.data.datasets[f].data[e])},getPixelForTick:function(e,f){return this.getPixelForValue(this.tickValues[e],null,null,f)},getPixelForValue:function(o,m,p,j){var l=this;var n;var f;var e=l.start;var h=+l.getRightValue(o);var k=c.log10(l.end)-c.log10(e);var q=l.paddingTop;var g=l.paddingBottom;var i=l.paddingLeft;if(l.isHorizontal()){if(h===0){f=l.left+i}else{n=l.width-(i+l.paddingRight);f=l.left+(n/k*(c.log10(h)-c.log10(e)));f+=i}}else{if(h===0){f=l.top+q}else{n=l.height-(q+g);f=(l.bottom-g)-(n/k*(c.log10(h)-c.log10(e)))}}return f},getValueForPixel:function(f){var j=this;var i;var e=c.log10(j.end)-c.log10(j.start);var g;var h;if(j.isHorizontal()){h=j.width-(j.paddingLeft+j.paddingRight);g=j.start*Math.pow(10,(f-j.left-j.paddingLeft)*e/h)}else{h=j.height-(j.paddingTop+j.paddingBottom);g=Math.pow(10,(j.bottom-j.paddingBottom-f)*e/h)/j.start}return g}});b.scaleService.registerScaleType("logarithmic",d,a)};