describe("Point element tests",function(){it("Should be constructed",function(){var a=new Chart.elements.Point({_datasetIndex:2,_index:1});expect(a).not.toBe(undefined);expect(a._datasetIndex).toBe(2);expect(a._index).toBe(1)});it("Should correctly identify as in range",function(){var a=new Chart.elements.Point({_datasetIndex:2,_index:1});expect(a.inRange(5)).toBe(false);expect(a.inLabelRange(5)).toBe(false);a._view={radius:2,hitRadius:3,x:10,y:15};expect(a.inRange(10,15)).toBe(true);expect(a.inRange(10,10)).toBe(false);expect(a.inRange(10,5)).toBe(false);expect(a.inRange(5,5)).toBe(false);expect(a.inLabelRange(5)).toBe(false);expect(a.inLabelRange(7)).toBe(true);expect(a.inLabelRange(10)).toBe(true);expect(a.inLabelRange(12)).toBe(true);expect(a.inLabelRange(15)).toBe(false);expect(a.inLabelRange(20)).toBe(false)});it("should get the correct tooltip position",function(){var a=new Chart.elements.Point({_datasetIndex:2,_index:1});a._view={radius:2,borderWidth:6,x:10,y:15};expect(a.tooltipPosition()).toEqual({x:10,y:15,padding:8})});it("should draw correctly",function(){var b=window.createMockContext();var a=new Chart.elements.Point({_datasetIndex:2,_index:1,_chart:{ctx:b,}});a._view={radius:2,pointStyle:"circle",hitRadius:3,borderColor:"rgba(1, 2, 3, 1)",borderWidth:6,backgroundColor:"rgba(0, 255, 0)",x:10,y:15,ctx:b};a.draw();expect(b.getCalls()).toEqual([{name:"setStrokeStyle",args:["rgba(1, 2, 3, 1)"]},{name:"setLineWidth",args:[6]},{name:"setFillStyle",args:["rgba(0, 255, 0)"]},{name:"beginPath",args:[]},{name:"arc",args:[10,15,2,0,2*Math.PI]},{name:"closePath",args:[],},{name:"fill",args:[],},{name:"stroke",args:[]}]);b.resetCalls();a._view.pointStyle="triangle";a.draw();expect(b.getCalls()).toEqual([{name:"setStrokeStyle",args:["rgba(1, 2, 3, 1)"]},{name:"setLineWidth",args:[6]},{name:"setFillStyle",args:["rgba(0, 255, 0)"]},{name:"beginPath",args:[]},{name:"moveTo",args:[10-3*2/Math.sqrt(3)/2,15+3*2/Math.sqrt(3)*Math.sqrt(3)/2/3]},{name:"lineTo",args:[10+3*2/Math.sqrt(3)/2,15+3*2/Math.sqrt(3)*Math.sqrt(3)/2/3],},{name:"lineTo",args:[10,15-2*3*2/Math.sqrt(3)*Math.sqrt(3)/2/3],},{name:"closePath",args:[],},{name:"fill",args:[],},{name:"stroke",args:[]}]);b.resetCalls();a._view.pointStyle="rect";a.draw();expect(b.getCalls()).toEqual([{name:"setStrokeStyle",args:["rgba(1, 2, 3, 1)"]},{name:"setLineWidth",args:[6]},{name:"setFillStyle",args:["rgba(0, 255, 0)"]},{name:"fillRect",args:[10-1/Math.SQRT2*2,15-1/Math.SQRT2*2,2/Math.SQRT2*2,2/Math.SQRT2*2]},{name:"strokeRect",args:[10-1/Math.SQRT2*2,15-1/Math.SQRT2*2,2/Math.SQRT2*2,2/Math.SQRT2*2]},{name:"stroke",args:[]}]);b.resetCalls();a._view.pointStyle="rectRot";a.draw();expect(b.getCalls()).toEqual([{name:"setStrokeStyle",args:["rgba(1, 2, 3, 1)"]},{name:"setLineWidth",args:[6]},{name:"setFillStyle",args:["rgba(0, 255, 0)"]},{name:"translate",args:[10,15]},{name:"rotate",args:[Math.PI/4]},{name:"fillRect",args:[-1/Math.SQRT2*2,-1/Math.SQRT2*2,2/Math.SQRT2*2,2/Math.SQRT2*2],},{name:"strokeRect",args:[-1/Math.SQRT2*2,-1/Math.SQRT2*2,2/Math.SQRT2*2,2/Math.SQRT2*2],},{name:"setTransform",args:[1,0,0,1,0,0],},{name:"stroke",args:[]}]);b.resetCalls();a._view.pointStyle="cross";a.draw();expect(b.getCalls()).toEqual([{name:"setStrokeStyle",args:["rgba(1, 2, 3, 1)"]},{name:"setLineWidth",args:[6]},{name:"setFillStyle",args:["rgba(0, 255, 0)"]},{name:"beginPath",args:[]},{name:"moveTo",args:[10,17]},{name:"lineTo",args:[10,13],},{name:"moveTo",args:[8,15],},{name:"lineTo",args:[12,15],},{name:"closePath",args:[],},{name:"stroke",args:[]}]);b.resetCalls();a._view.pointStyle="crossRot";a.draw();expect(b.getCalls()).toEqual([{name:"setStrokeStyle",args:["rgba(1, 2, 3, 1)"]},{name:"setLineWidth",args:[6]},{name:"setFillStyle",args:["rgba(0, 255, 0)"]},{name:"beginPath",args:[]},{name:"moveTo",args:[10-Math.cos(Math.PI/4)*2,15-Math.sin(Math.PI/4)*2]},{name:"lineTo",args:[10+Math.cos(Math.PI/4)*2,15+Math.sin(Math.PI/4)*2],},{name:"moveTo",args:[10-Math.cos(Math.PI/4)*2,15+Math.sin(Math.PI/4)*2],},{name:"lineTo",args:[10+Math.cos(Math.PI/4)*2,15-Math.sin(Math.PI/4)*2],},{name:"closePath",args:[],},{name:"stroke",args:[]}]);b.resetCalls();a._view.pointStyle="star";a.draw();expect(b.getCalls()).toEqual([{name:"setStrokeStyle",args:["rgba(1, 2, 3, 1)"]},{name:"setLineWidth",args:[6]},{name:"setFillStyle",args:["rgba(0, 255, 0)"]},{name:"beginPath",args:[]},{name:"moveTo",args:[10,17]},{name:"lineTo",args:[10,13],},{name:"moveTo",args:[8,15],},{name:"lineTo",args:[12,15],},{name:"moveTo",args:[10-Math.cos(Math.PI/4)*2,15-Math.sin(Math.PI/4)*2]},{name:"lineTo",args:[10+Math.cos(Math.PI/4)*2,15+Math.sin(Math.PI/4)*2],},{name:"moveTo",args:[10-Math.cos(Math.PI/4)*2,15+Math.sin(Math.PI/4)*2],},{name:"lineTo",args:[10+Math.cos(Math.PI/4)*2,15-Math.sin(Math.PI/4)*2],},{name:"closePath",args:[],},{name:"stroke",args:[]}]);b.resetCalls();a._view.pointStyle="line";a.draw();expect(b.getCalls()).toEqual([{name:"setStrokeStyle",args:["rgba(1, 2, 3, 1)"]},{name:"setLineWidth",args:[6]},{name:"setFillStyle",args:["rgba(0, 255, 0)"]},{name:"beginPath",args:[]},{name:"moveTo",args:[8,15]},{name:"lineTo",args:[12,15],},{name:"closePath",args:[],},{name:"stroke",args:[]}]);b.resetCalls();a._view.pointStyle="dash";a.draw();expect(b.getCalls()).toEqual([{name:"setStrokeStyle",args:["rgba(1, 2, 3, 1)"]},{name:"setLineWidth",args:[6]},{name:"setFillStyle",args:["rgba(0, 255, 0)"]},{name:"beginPath",args:[]},{name:"moveTo",args:[10,15]},{name:"lineTo",args:[12,15],},{name:"closePath",args:[],},{name:"stroke",args:[]}])});it("should draw correctly with default settings if necessary",function(){var b=window.createMockContext();var a=new Chart.elements.Point({_datasetIndex:2,_index:1,_chart:{ctx:b,}});a._view={radius:2,hitRadius:3,x:10,y:15,ctx:b};a.draw();expect(b.getCalls()).toEqual([{name:"setStrokeStyle",args:["rgba(0,0,0,0.1)"]},{name:"setLineWidth",args:[1]},{name:"setFillStyle",args:["rgba(0,0,0,0.1)"]},{name:"beginPath",args:[]},{name:"arc",args:[10,15,2,0,2*Math.PI]},{name:"closePath",args:[],},{name:"fill",args:[],},{name:"stroke",args:[]}])});it("should not draw if skipped",function(){var b=window.createMockContext();var a=new Chart.elements.Point({_datasetIndex:2,_index:1,_chart:{ctx:b,}});a._view={radius:2,hitRadius:3,x:10,y:15,ctx:b,skip:true};a.draw();expect(b.getCalls()).toEqual([])})});