describe("Category scale tests",function(){it("Should register the constructor with the scale service",function(){var a=Chart.scaleService.getScaleConstructor("category");expect(a).not.toBe(undefined);expect(typeof a).toBe("function")});it("Should have the correct default config",function(){var a=Chart.scaleService.getScaleDefaults("category");expect(a).toEqual({display:true,gridLines:{color:"rgba(0, 0, 0, 0.1)",drawBorder:true,drawOnChartArea:true,drawTicks:true,tickMarkLength:10,lineWidth:1,offsetGridLines:false,display:true,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineWidth:1},position:"bottom",scaleLabel:{labelString:"",display:false},ticks:{beginAtZero:false,minRotation:0,maxRotation:50,mirror:false,padding:10,reverse:false,display:true,callback:a.ticks.callback,autoSkip:true,autoSkipPadding:0,labelOffset:0}});expect(a.ticks.callback).toEqual(jasmine.any(Function))});it("Should generate ticks from the data labales",function(){var b="myScale";var c={datasets:[{yAxisID:b,data:[10,5,0,25,78]}],labels:["tick1","tick2","tick3","tick4","tick5"]};var a=Chart.helpers.clone(Chart.scaleService.getScaleDefaults("category"));var e=Chart.scaleService.getScaleConstructor("category");var d=new e({ctx:{},options:a,chart:{data:c},id:b});d.determineDataLimits();d.buildTicks();expect(d.ticks).toEqual(c.labels)});it("should get the correct label for the index",function(){var b="myScale";var c={datasets:[{yAxisID:b,data:[10,5,0,25,78]}],labels:["tick1","tick2","tick3","tick4","tick5"]};var a=Chart.helpers.clone(Chart.scaleService.getScaleDefaults("category"));var e=Chart.scaleService.getScaleConstructor("category");var d=new e({ctx:{},options:a,chart:{data:c},id:b});d.determineDataLimits();d.buildTicks();expect(d.getLabelForIndex(1)).toBe("tick2")});it("Should get the correct pixel for a value when horizontal",function(){var b="myScale";var d={datasets:[{yAxisID:b,data:[10,5,0,25,78]}],labels:["tick1","tick2","tick3","tick4","tick_last"]};var c=window.createMockContext();var a=Chart.helpers.clone(Chart.scaleService.getScaleDefaults("category"));a.gridLines.offsetGridLines=true;var g=Chart.scaleService.getScaleConstructor("category");var f=new g({ctx:c,options:a,chart:{data:d},id:b});var e=f.update(600,100);expect(f.width).toBe(600);expect(f.height).toBe(28);expect(f.paddingTop).toBe(0);expect(f.paddingBottom).toBe(0);expect(f.paddingLeft).toBe(28);expect(f.paddingRight).toBe(48);expect(f.labelRotation).toBe(0);expect(e).toEqual({width:600,height:28,});f.left=5;f.top=5;f.right=605;f.bottom=33;expect(f.getPixelForValue(0,0,0,false)).toBe(33);expect(f.getPixelForValue(0,0,0,true)).toBe(85);expect(f.getValueForPixel(33)).toBe(0);expect(f.getValueForPixel(85)).toBe(0);expect(f.getPixelForValue(0,4,0,false)).toBe(452);expect(f.getPixelForValue(0,4,0,true)).toBe(505);expect(f.getValueForPixel(452)).toBe(4);expect(f.getValueForPixel(505)).toBe(4);a.gridLines.offsetGridLines=false;expect(f.getPixelForValue(0,0,0,false)).toBe(33);expect(f.getPixelForValue(0,0,0,true)).toBe(33);expect(f.getValueForPixel(33)).toBe(0);expect(f.getPixelForValue(0,4,0,false)).toBe(557);expect(f.getPixelForValue(0,4,0,true)).toBe(557);expect(f.getValueForPixel(557)).toBe(4)});it("Should get the correct pixel for a value when horizontal and zoomed",function(){var b="myScale";var d={datasets:[{yAxisID:b,data:[10,5,0,25,78]}],labels:["tick1","tick2","tick3","tick4","tick_last"]};var c=window.createMockContext();var a=Chart.helpers.clone(Chart.scaleService.getScaleDefaults("category"));a.gridLines.offsetGridLines=true;a.ticks.min="tick2";a.ticks.max="tick4";var g=Chart.scaleService.getScaleConstructor("category");var f=new g({ctx:c,options:a,chart:{data:d},id:b});var e=f.update(600,100);expect(f.width).toBe(600);expect(f.height).toBe(28);expect(f.paddingTop).toBe(0);expect(f.paddingBottom).toBe(0);expect(f.paddingLeft).toBe(28);expect(f.paddingRight).toBe(28);expect(f.labelRotation).toBe(0);expect(e).toEqual({width:600,height:28,});f.left=5;f.top=5;f.right=605;f.bottom=33;expect(f.getPixelForValue(0,1,0,false)).toBe(33);expect(f.getPixelForValue(0,1,0,true)).toBe(124);expect(f.getPixelForValue(0,3,0,false)).toBe(396);expect(f.getPixelForValue(0,3,0,true)).toBe(486);a.gridLines.offsetGridLines=false;expect(f.getPixelForValue(0,1,0,false)).toBe(33);expect(f.getPixelForValue(0,1,0,true)).toBe(33);expect(f.getPixelForValue(0,3,0,false)).toBe(577);expect(f.getPixelForValue(0,3,0,true)).toBe(577)});it("should get the correct pixel for a value when vertical",function(){var b="myScale";var d={datasets:[{yAxisID:b,data:[10,5,0,25,78]}],labels:["tick1","tick2","tick3","tick4","tick_last"]};var c=window.createMockContext();var a=Chart.helpers.clone(Chart.scaleService.getScaleDefaults("category"));a.gridLines.offsetGridLines=true;a.position="left";var g=Chart.scaleService.getScaleConstructor("category");var f=new g({ctx:c,options:a,chart:{data:d},id:b});var e=f.update(100,200);expect(f.width).toBe(100);expect(f.height).toBe(200);expect(f.paddingTop).toBe(6);expect(f.paddingBottom).toBe(6);expect(f.paddingLeft).toBe(0);expect(f.paddingRight).toBe(0);expect(f.labelRotation).toBe(0);expect(e).toEqual({width:100,height:200,});f.left=5;f.top=5;f.right=105;f.bottom=205;expect(f.getPixelForValue(0,0,0,false)).toBe(11);expect(f.getPixelForValue(0,0,0,true)).toBe(30);expect(f.getValueForPixel(11)).toBe(0);expect(f.getValueForPixel(30)).toBe(0);expect(f.getPixelForValue(0,4,0,false)).toBe(161);expect(f.getPixelForValue(0,4,0,true)).toBe(180);expect(f.getValueForPixel(161)).toBe(4);a.gridLines.offsetGridLines=false;expect(f.getPixelForValue(0,0,0,false)).toBe(11);expect(f.getPixelForValue(0,0,0,true)).toBe(11);expect(f.getValueForPixel(11)).toBe(0);expect(f.getPixelForValue(0,4,0,false)).toBe(199);expect(f.getPixelForValue(0,4,0,true)).toBe(199);expect(f.getValueForPixel(199)).toBe(4)});it("should get the correct pixel for a value when vertical and zoomed",function(){var b="myScale";var d={datasets:[{yAxisID:b,data:[10,5,0,25,78]}],labels:["tick1","tick2","tick3","tick4","tick_last"]};var c=window.createMockContext();var a=Chart.helpers.clone(Chart.scaleService.getScaleDefaults("category"));a.gridLines.offsetGridLines=true;a.ticks.min="tick2";a.ticks.max="tick4";a.position="left";var g=Chart.scaleService.getScaleConstructor("category");var f=new g({ctx:c,options:a,chart:{data:d},id:b});var e=f.update(100,200);expect(f.width).toBe(70);expect(f.height).toBe(200);expect(f.paddingTop).toBe(6);expect(f.paddingBottom).toBe(6);expect(f.paddingLeft).toBe(0);expect(f.paddingRight).toBe(0);expect(f.labelRotation).toBe(0);expect(e).toEqual({width:70,height:200,});f.left=5;f.top=5;f.right=75;f.bottom=205;expect(f.getPixelForValue(0,1,0,false)).toBe(11);expect(f.getPixelForValue(0,1,0,true)).toBe(42);expect(f.getPixelForValue(0,3,0,false)).toBe(136);expect(f.getPixelForValue(0,3,0,true)).toBe(168);a.gridLines.offsetGridLines=false;expect(f.getPixelForValue(0,1,0,false)).toBe(11);expect(f.getPixelForValue(0,1,0,true)).toBe(11);expect(f.getPixelForValue(0,3,0,false)).toBe(199);expect(f.getPixelForValue(0,3,0,true)).toBe(199)})});