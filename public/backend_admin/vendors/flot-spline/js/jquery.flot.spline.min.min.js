!function(h){function g(H,G,F,E,D,C,B){var y,x,w,v,u,t,s,r,A=Math.pow,z=Math.sqrt;return y=z(A(F-H,2)+A(E-G,2)),x=z(A(D-F,2)+A(C-E,2)),w=B*y/(y+x),v=B-w,u=F+w*(H-D),t=E+w*(G-C),s=F-v*(H-D),r=E-v*(G-C),[u,t,s,r]}function k(a,s,r,q,p){var o=h.color.parse(p);o.a="number"==typeof q?q:0.3,o.normalize(),o=o.toString(),s.beginPath(),s.moveTo(a[0][0],a[0][1]);for(var n=a.length,m=0;n>m;m++){s[a[m][3]].apply(s,a[m][2])}s.stroke(),s.lineWidth=0,s.lineTo(a[n-1][0],r),s.lineTo(a[0][0],r),s.closePath(),q!==!1&&(s.fillStyle=o,s.fill())}function j(f,c,n,m){(void 0===c||"bezier"!==c&&"quadratic"!==c)&&(c="quadratic"),c+="CurveTo",0==l.length?l.push([n[0],n[1],m.concat(n.slice(2)),c]):"quadraticCurveTo"==c&&2==n.length?(m=m.slice(0,2).concat(n),l.push([n[0],n[1],m,c])):l.push([n[2],n[3],m.concat(n.slice(2)),c])}function i(z,y,x){if(x.splines.show===!0){var u,t,s,w=[],v=x.splines.tension||0.5,e=x.datapoints.points,d=x.datapoints.pointsize,c=z.getPlotOffset(),b=e.length,a=[];if(l=[],4>b/d){return h.extend(x.lines,x.splines),void 0}for(u=0;b>u;u+=d){t=e[u],s=e[u+1],null==t||t<x.xaxis.min||t>x.xaxis.max||s<x.yaxis.min||s>x.yaxis.max||a.push(x.xaxis.p2c(t)+c.left,x.yaxis.p2c(s)+c.top)}for(b=a.length,u=0;b-2>u;u+=2){w=w.concat(g.apply(this,a.slice(u,u+6).concat([v])))}for(y.save(),y.strokeStyle=x.color,y.lineWidth=x.splines.lineWidth,j(y,"quadratic",a.slice(0,4),w.slice(0,2)),u=2;b-3>u;u+=2){j(y,"bezier",a.slice(u,u+4),w.slice(2*u-2,2*u+2))}j(y,"quadratic",a.slice(b-2,b),[w[2*b-10],w[2*b-9],a[b-4],a[b-3]]),k(l,y,z.height()+10,x.splines.fill,x.color),y.restore()}}var l=[];h.plot.plugins.push({init:function(b){b.hooks.drawSeries.push(i)},options:{series:{splines:{show:!1,lineWidth:2,tension:0.5,fill:!1}}},name:"spline",version:"0.8.2"})}(jQuery);