var CanvasRenderer=function(b,k){var i;var c=document.createElement("canvas");b.appendChild(c);if(typeof(G_vmlCanvasManager)!=="undefined"){G_vmlCanvasManager.initElement(c)}var j=c.getContext("2d");c.width=c.height=k.size;var h=1;if(window.devicePixelRatio>1){h=window.devicePixelRatio;c.style.width=c.style.height=[k.size,"px"].join("");c.width=c.height=k.size*h;j.scale(h,h)}j.translate(k.size/2,k.size/2);j.rotate((-1/2+k.rotate/180)*Math.PI);var f=(k.size-k.lineWidth)/2;if(k.scaleColor&&k.scaleLength){f-=k.scaleLength+2}Date.now=Date.now||function(){return +(new Date())};var g=function(n,l,o){o=Math.min(Math.max(-1,o||0),1);var m=o<=0?true:false;j.beginPath();j.arc(0,0,f,0,Math.PI*2*o,m);j.strokeStyle=n;j.lineWidth=l;j.stroke()};var a=function(){var n;var m;j.lineWidth=1;j.fillStyle=k.scaleColor;j.save();for(var l=24;l>0;--l){if(l%6===0){m=k.scaleLength;n=0}else{m=k.scaleLength*0.6;n=k.scaleLength-m}j.fillRect(-k.size/2+n,0,m,1);j.rotate(Math.PI/12)}j.restore()};var e=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(l){window.setTimeout(l,1000/60)}}());var d=function(){if(k.scaleColor){a()}if(k.trackColor){g(k.trackColor,k.trackWidth||k.lineWidth,1)}};this.getCanvas=function(){return c};this.getCtx=function(){return j};this.clear=function(){j.clearRect(k.size/-2,k.size/-2,k.size,k.size)};this.draw=function(m){if(!!k.scaleColor||!!k.trackColor){if(j.getImageData&&j.putImageData){if(!i){d();i=j.getImageData(0,0,k.size*h,k.size*h)}else{j.putImageData(i,0,0)}}else{this.clear();d()}}else{this.clear()}j.lineCap=k.lineCap;var l;if(typeof(k.barColor)==="function"){l=k.barColor(m)}else{l=k.barColor}g(l,k.lineWidth,m/100)}.bind(this);this.animate=function(o,n){var l=Date.now();k.onStart(o,n);var m=function(){var q=Math.min(Date.now()-l,k.animate.duration);var p=k.easing(this,q,o,n-o,k.animate.duration);this.draw(p);k.onStep(o,n,p);if(q>=k.animate.duration){k.onStop(o,n)}else{e(m)}}.bind(this);e(m)}.bind(this)};