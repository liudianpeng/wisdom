define(function(){var a={average:function(f){var d=0;var e=0;for(var c=0;c<f.length;c++){if(!isNaN(f[c])){d+=f[c];e++}}return e===0?NaN:d/e},sum:function(e){var d=0;for(var c=0;c<e.length;c++){d+=e[c]||0}return d},max:function(e){var c=-Infinity;for(var d=0;d<e.length;d++){e[d]>c&&(c=e[d])}return c},min:function(e){var d=Infinity;for(var c=0;c<e.length;c++){e[c]<d&&(d=e[c])}return d},nearest:function(c){return c[0]}};var b=function(d,c){return Math.round(d.length/2)};return function(d,c,e){c.eachSeriesByType(d,function(g){var i=g.getData();var j=g.get("sampling");var h=g.coordinateSystem;if(h.type==="cartesian2d"&&j){var f=h.getBaseAxis();var m=h.getOtherAxis(f);var n=f.getExtent();var o=n[1]-n[0];var k=Math.round(i.count()/o);if(k>1){var l;if(typeof j==="string"){l=a[j]}else{if(typeof j==="function"){l=j}}if(l){i=i.downSample(m.dim,1/k,l,b);g.setData(i)}}}},this)}});