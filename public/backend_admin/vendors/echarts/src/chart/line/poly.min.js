define(function(d){var e=d("zrender/graphic/Path");var j=d("zrender/core/vector");var k=j.min;var b=j.max;var a=j.scaleAndAdd;var c=j.copy;var l=[];var g=[];var f=[];function m(n){return isNaN(n[0])||isNaN(n[1])}function i(C,F,r,G,A,B,q,s,x,y,o){var v=0;var w=r;for(var D=0;D<G;D++){var z=F[w];if(w>=A||w<0){break}if(m(z)){if(o){w+=B;continue}break}if(w===r){C[B>0?"moveTo":"lineTo"](z[0],z[1]);c(g,z)}else{if(x>0){var I=w+B;var n=F[I];if(o){while(n&&m(F[I])){I+=B;n=F[I]}}var H=0.5;var u=F[v];var n=F[I];if(!n||m(n)){c(f,z)}else{if(m(n)&&!o){n=z}j.sub(l,n,u);var J;var t;if(y==="x"||y==="y"){var E=y==="x"?0:1;J=Math.abs(z[E]-u[E]);t=Math.abs(z[E]-n[E])}else{J=j.dist(z,u);t=j.dist(z,n)}H=t/(t+J);a(f,z,l,-x*(1-H))}k(g,g,s);b(g,g,q);k(f,f,s);b(f,f,q);C.bezierCurveTo(g[0],g[1],f[0],f[1],z[0],z[1]);a(g,z,l,x*H)}else{C.lineTo(z[0],z[1])}}v=w;w+=B}return D}function h(r,p){var q=[Infinity,Infinity];var n=[-Infinity,-Infinity];if(p){for(var o=0;o<r.length;o++){var s=r[o];if(s[0]<q[0]){q[0]=s[0]}if(s[1]<q[1]){q[1]=s[1]}if(s[0]>n[0]){n[0]=s[0]}if(s[1]>n[1]){n[1]=s[1]}}}return{min:p?q:n,max:p?n:q}}return{Polyline:e.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:true,smoothMonotone:null,connectNulls:false},style:{fill:null,stroke:"#000"},buildPath:function(p,q){var s=q.points;var r=0;var o=s.length;var n=h(s,q.smoothConstraint);if(q.connectNulls){for(;o>0;o--){if(!m(s[o-1])){break}}for(;r<o;r++){if(!m(s[r])){break}}}while(r<o){r+=i(p,s,r,o,o,1,n.min,n.max,q.smooth,q.smoothMonotone,q.connectNulls)+1}}}),Polygon:e.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:true,smoothMonotone:null,connectNulls:false},buildPath:function(w,s){var u=s.points;var q=s.stackedOnPoints;var p=0;var r=u.length;var t=s.smoothMonotone;var v=h(u,s.smoothConstraint);var n=h(q,s.smoothConstraint);if(s.connectNulls){for(;r>0;r--){if(!m(u[r-1])){break}}for(;p<r;p++){if(!m(u[p])){break}}}while(p<r){var o=i(w,u,p,r,r,1,v.min,v.max,s.smooth,t,s.connectNulls);i(w,q,p+o-1,o,r,-1,n.min,n.max,s.stackedOnSmooth,t,s.connectNulls);p+=o+1;w.closePath()}}})}});