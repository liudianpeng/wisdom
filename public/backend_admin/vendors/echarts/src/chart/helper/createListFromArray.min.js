define(function(c){var m=c("../../data/List");var j=c("../../data/helper/completeDimensions");var e=c("zrender/core/util");var o=c("../../util/model");var b=c("../../CoordinateSystem");var k=o.getDataItemValue;var d=o.converDataValue;function a(q){var p=0;while(p<q.length&&q[p]==null){p++}return q[p]}function l(q){var p=a(q);return p!=null&&!e.isArray(k(p))}function f(u,s,w){u=u||[];if(!e.isArray(u)){throw new Error("Invalid data.")}var q=s.get("coordinateSystem");var r=i[q];var B=b.get(q);var C=r&&r(u,s,w);var p=C&&C.dimensions;if(!p){p=(B&&B.dimensions)||["x","y"];p=j(p,u,p.concat(["value"]))}var z=C&&C.categoryAxisModel;var v;var y=p[0].type==="ordinal"?0:(p[1].type==="ordinal"?1:-1);var x=new m(p,s);var t=g(C,u);var A=(z&&l(u))?function(G,F,D,E){return E===y?D:d(k(G),p[E])}:function(I,G,D,F){var E=k(I);var H=d(E&&E[F],p[F]);if(y===F){if(typeof H==="string"){v=v||z.getCategories();H=e.indexOf(v,H);if(H<0&&!isNaN(H)){H=+H}}}return H};x.initData(u,t,A);return x}function h(p){return p!=="category"&&p!=="time"}function n(p){return p==="category"?"ordinal":p==="time"?"time":"float"}var i={cartesian2d:function(t,r,v){var s=v.getComponent("xAxis",r.get("xAxisIndex"));var w=v.getComponent("yAxis",r.get("yAxisIndex"));if(!s||!w){throw new Error("Axis option not found")}var u=s.get("type");var x=w.get("type");var p=[{name:"x",type:n(u),stackable:h(u)},{name:"y",type:n(x),stackable:h(x)}];var q=u==="category";j(p,t,["x","y","z"]);return{dimensions:p,categoryIndex:q?0:1,categoryAxisModel:q?s:(x==="category"?w:null)}},polar:function(t,s,v){var w=s.get("polarIndex")||0;var u=function(A){return A.get("polarIndex")===w};var q=v.findComponents({mainType:"angleAxis",filter:u})[0];var x=v.findComponents({mainType:"radiusAxis",filter:u})[0];if(!q||!x){throw new Error("Axis option not found")}var y=x.get("type");var r=q.get("type");var p=[{name:"radius",type:n(y),stackable:h(y)},{name:"angle",type:n(r),stackable:h(r)}];var z=r==="category";j(p,t,["radius","angle","value"]);return{dimensions:p,categoryIndex:z?1:0,categoryAxisModel:z?q:(y==="category"?x:null)}},geo:function(r,q,p){return{dimensions:j([{name:"lng"},{name:"lat"}],r,["lng","lat","value"])}}};function g(p,t){var u=[];if(p&&p.categoryAxisModel){var q=p.categoryAxisModel.getCategories();if(q){var s=t.length;if(e.isArray(t[0])&&t[0].length>1){u=[];for(var r=0;r<s;r++){u[r]=q[t[r][p.categoryIndex||0]]}}else{u=q.slice(0)}}}return u}return f});