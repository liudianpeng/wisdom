define(function(b){var f=b("../../util/graphic");var d=b("./Symbol");function e(g){this.group=new f.Group();this._symbolCtor=g||d}var c=e.prototype;function a(j,h,i){var g=j.getItemLayout(h);return g&&!isNaN(g[0])&&!isNaN(g[1])&&!(i&&i(h))&&j.getItemVisual(h,"symbol")!=="none"}c.updateData=function(j,i){var k=this.group;var g=j.hostModel;var l=this._data;var h=this._symbolCtor;j.diff(l).add(function(n){var m=j.getItemLayout(n);if(a(j,n,i)){var o=new h(j,n);o.attr("position",m);j.setItemGraphicEl(n,o);k.add(o)}}).update(function(o,n){var p=l.getItemGraphicEl(n);var m=j.getItemLayout(o);if(!a(j,o,i)){k.remove(p);return}if(!p){p=new h(j,o);p.attr("position",m)}else{p.updateData(j,o);f.updateProps(p,{position:m},g)}k.add(p);j.setItemGraphicEl(o,p)}).remove(function(m){var n=l.getItemGraphicEl(m);n&&n.fadeOut(function(){k.remove(n)})}).execute();this._data=j};c.updateLayout=function(){var g=this._data;if(g){g.eachItemGraphicEl(function(i,h){i.attr("position",g.getItemLayout(h))})}};c.remove=function(g){var i=this.group;var h=this._data;if(h){if(g){h.eachItemGraphicEl(function(j){j.fadeOut(function(){i.remove(j)})})}else{i.removeAll()}}};return e});