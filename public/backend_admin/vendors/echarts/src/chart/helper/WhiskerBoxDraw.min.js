define(function(e){var f=e("zrender/core/util");var b=e("../../util/graphic");var g=e("zrender/graphic/Path");var d=g.extend({type:"whiskerInBox",shape:{},buildPath:function(l,m){for(var n in m){if(n.indexOf("ends")===0){var o=m[n];l.moveTo(o[0][0],o[0][1]);l.lineTo(o[1][0],o[1][1])}}}});function a(n,l,m,o){b.Group.call(this);this.bodyIndex;this.whiskerIndex;this.styleUpdater=m;this._createContent(n,l,o);this.updateData(n,l,o);this._seriesModel}var k=a.prototype;k._createContent=function(o,l,r){var m=o.getItemLayout(l);var q=m.chartLayout==="horizontal"?1:0;var n=0;this.add(new b.Polygon({shape:{points:r?h(m.bodyEnds,q,m):m.bodyEnds},style:{strokeNoScale:true},z2:100}));this.bodyIndex=n++;var p=f.map(m.whiskerEnds,function(s){return r?h(s,q,m):s});this.add(new d({shape:i(p),style:{strokeNoScale:true},z2:100}));this.whiskerIndex=n++};function h(m,n,l){return f.map(m,function(o){o=o.slice();o[n]=l.initBaseline;return o})}function i(m){var l={};f.each(m,function(n,o){l["ends"+o]=n});return l}k.updateData=function(o,l,q){var m=this._seriesModel=o.hostModel;var n=o.getItemLayout(l);var p=b[q?"initProps":"updateProps"];p(this.childAt(this.bodyIndex),{shape:{points:n.bodyEnds}},m,l);p(this.childAt(this.whiskerIndex),{shape:i(n.whiskerEnds)},m,l);this.styleUpdater.call(null,this,o,l)};f.inherits(a,b.Group);function c(l){this.group=new b.Group();this.styleUpdater=l}var j=c.prototype;j.updateData=function(m){var n=this.group;var o=this._data;var l=this.styleUpdater;m.diff(o).add(function(p){if(m.hasValue(p)){var q=new a(m,p,l,true);m.setItemGraphicEl(p,q);n.add(q)}}).update(function(q,p){var r=o.getItemGraphicEl(p);if(!m.hasValue(q)){n.remove(r);return}if(!r){r=new a(m,q,l)}else{r.updateData(m,q)}n.add(r);m.setItemGraphicEl(q,r)}).remove(function(p){var q=o.getItemGraphicEl(p);q&&n.remove(q)}).execute();this._data=m};j.remove=function(){var m=this.group;var l=this._data;this._data=null;l&&l.eachItemGraphicEl(function(n){n&&m.remove(n)})};return c});