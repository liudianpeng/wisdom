define(function(b){var a=b("zrender/core/util");return function(c){var d={};c.eachSeriesByType("map",function(h){var f=h.get("map");if(d[f]){return}var g={};a.each(h.seriesGroup,function(j){var k=j.coordinateSystem;var i=j.getData();if(j.get("showLegendSymbol")&&c.getComponent("legend")){i.each("value",function(o,m){var n=i.getName(m);var p=k.getRegion(n);if(!p||isNaN(o)){return}var q=g[n]||0;var l=k.dataToPoint(p.center);g[n]=q+1;i.setItemLayout(m,{point:l,offset:q})})}});var e=h.getData();e.each(function(i){var j=e.getName(i);var k=e.getItemLayout(i)||{};k.showLabel=!g[j];e.setItemLayout(i,k)});d[f]=true})}});