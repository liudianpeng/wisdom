define(function(a){var e=a("../../coord/View");var b=a("../../util/layout");var d=a("zrender/core/bbox");function c(g,i,f){var h=g.getBoxLayoutParams();h.aspect=f;return b.getLayoutRect(h,{width:i.getWidth(),height:i.getHeight()})}return function(f,h){var g=[];f.eachSeriesByType("graph",function(m){var u=m.get("coordinateSystem");if(!u||u==="view"){var k=new e();g.push(k);var o=m.getData();var p=o.mapArray(function(v){var w=o.getItemModel(v);return[+w.get("x"),+w.get("y")]});var n=[];var t=[];d.fromPoints(p,n,t);if(t[0]-n[0]===0){t[0]+=1;n[0]-=1}if(t[1]-n[1]===0){t[1]+=1;n[1]-=1}var j=(t[0]-n[0])/(t[1]-n[1]);var r=c(m,h,j);if(isNaN(j)){n=[r.x,r.y];t=[r.x+r.width,r.y+r.height]}var i=t[0]-n[0];var s=t[1]-n[1];var q=r.width;var l=r.height;k=m.coordinateSystem=new e();k.zoomLimit=m.get("scaleLimit");k.setBoundingRect(n[0],n[1],i,s);k.setViewRect(r.x,r.y,q,l);k.setCenter(m.get("center"));k.setZoom(m.get("zoom"))}});return g}});