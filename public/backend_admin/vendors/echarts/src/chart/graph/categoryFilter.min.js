define(function(a){return function(b){var c=b.findComponents({mainType:"legend"});if(!c||!c.length){return}b.eachSeriesByType("graph",function(h){var d=h.getCategoriesData();var g=h.getGraph();var f=g.data;var e=d.mapArray(d.getName);f.filterSelf(function(j){var k=f.getItemModel(j);var m=k.getShallow("category");if(m!=null){if(typeof m==="number"){m=e[m]}for(var l=0;l<c.length;l++){if(!c[l].isSelected(m)){return false}}}return true})},this)}});