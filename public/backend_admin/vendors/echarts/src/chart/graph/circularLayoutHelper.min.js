define(function(a){var b=a("zrender/core/vector");return function(g){var i=g.coordinateSystem;if(i&&i.type!=="view"){return}var l=i.getBoundingRect();var d=g.getData();var m=d.graph;var f=0;var k=d.getSum("value");var j=Math.PI*2/(k||d.count());var h=l.width/2+l.x;var e=l.height/2+l.y;var c=Math.min(l.width,l.height)/2;m.eachNode(function(n){var o=n.getValue("value");f+=j*(k?o:2)/2;n.setLayout([c*Math.cos(f)+h,c*Math.sin(f)+e]);f+=j*(k?o:2)/2});m.eachEdge(function(p){var o=p.getModel().get("lineStyle.normal.curveness")||0;var t=b.clone(p.node1.getLayout());var r=b.clone(p.node2.getLayout());var s;var q=(t[0]+r[0])/2;var n=(t[1]+r[1])/2;if(o>0){o*=3;s=[h*o+q*(1-o),e*o+n*(1-o)]}p.setLayout([t,r,s])})}});