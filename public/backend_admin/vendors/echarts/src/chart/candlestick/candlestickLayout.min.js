define(function(b){var a=2;var c=5;var d=4;return function(f,g){f.eachSeriesByType("candlestick",function(h){var i=h.coordinateSystem;var l=h.getData();var k=h.dimensions;var m=h.get("layout");var j=e(h,l);l.each(k,function(){var p=arguments;var t=k.length;var w=p[0];var C=p[t];var y=m==="horizontal"?0:1;var B=1-y;var D=p[1];var v=p[2];var n=p[3];var q=p[4];var A=Math.min(D,v);var u=Math.max(D,v);var G=r(A);var x=r(u);var o=r(n);var z=r(q);var s=[[z,x],[o,G]];var F=[];E(x,0);E(G,1);l.setItemLayout(C,{chartLayout:m,sign:D>v?-1:D<v?1:0,initBaseline:D>v?x[B]:G[B],bodyEnds:F,whiskerEnds:s});function r(I){var H=[];H[y]=w;H[B]=I;return(isNaN(w)||isNaN(I))?[NaN,NaN]:i.dataToPoint(H)}function E(H,K){var J=H.slice();var I=H.slice();J[y]+=j/2;I[y]-=j/2;K?F.push(J,I):F.push(I,J)}},true)})};function e(g,j){var i=g.getBaseAxis();var h;var f=i.type==="category"?i.getBandWidth():(h=i.getExtent(),Math.abs(h[1]-h[0])/j.count());return f/2-2>c?f/2-2:f-c>d?c:Math.max(f-d,a)}});