define(function(b){var a=b("../../util/graphic");var f=b("../../util/layout");var c=b("zrender/core/util");var i=8;var d=8;var e=5;function g(k,j){this.group=new a.Group();k.add(this.group);this._onSelect=j||c.noop}g.prototype={constructor:g,render:function(l,o,q){var n=l.getModel("breadcrumb");var k=this.group;k.removeAll();if(!n.get("show")||!q){return}var j=n.getModel("itemStyle.normal");var m=j.getModel("textStyle");var p={pos:{left:n.get("left"),right:n.get("right"),top:n.get("top"),bottom:n.get("bottom")},box:{width:o.getWidth(),height:o.getHeight()},emptyItemWidth:n.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,q,p,m);this._renderContent(n,q,p,j,m);f.positionGroup(k,p.pos,p.box)},_prepare:function(k,o,m,j){for(var l=o;l;l=l.parentNode){var q=l.getModel().get("name");var p=j.getTextRect(q);var n=Math.max(p.width+i*2,m.emptyItemWidth);m.totalWidth+=n+d;m.renderList.push({node:l,text:q,width:n})}},_renderContent:function(p,r,x,s,t){var k=0;var m=x.emptyItemWidth;var v=p.get("height");var l=f.getAvailableSize(x.pos,x.box);var o=x.totalWidth;var j=x.renderList;for(var n=j.length-1;n>=0;n--){var w=j[n];var q=w.width;var u=w.text;if(o>l.width){o-=q-m;q=m;u=""}this.group.add(new a.Polygon({shape:{points:h(k,0,q,v,n===j.length-1,n===0)},style:c.defaults(s.getItemStyle(),{lineJoin:"bevel",text:u,textFill:t.getTextColor(),textFont:t.getFont()}),z:10,onclick:c.bind(this._onSelect,this,w.node)}));k+=q+d}},remove:function(){this.group.removeAll()}};function h(j,p,n,o,l,k){var m=[[l?j:j-e,p],[j+n,p],[j+n,p+o],[l?j:j-e,p+o]];!k&&m.splice(2,0,[j+n+e,p+o/2]);!l&&m.push([j,p+o/2]);return m}return g});