define(function(c){var b=c("./format");var e=c("./number");var a=c("zrender/core/util");var d=["x","y","z","radius","angle"];var f={};f.createNameEach=function(j,h){j=j.slice();var i=a.map(j,f.capitalFirst);h=(h||[]).slice();var g=a.map(h,f.capitalFirst);return function(l,k){a.each(j,function(o,n){var p={name:o,capital:i[n]};for(var m=0;m<h.length;m++){p[h[m]]=o+g[m]}l.call(k,p)})}};f.capitalFirst=function(g){return g?g.charAt(0).toUpperCase()+g.substr(1):g};f.eachAxisDim=f.createNameEach(d,["axisIndex","axis","index"]);f.normalizeToArray=function(g){return a.isArray(g)?g:g==null?[]:[g]};f.createLinkedNodesFinder=function(j,g,h){return function(o){var m={nodes:[],records:{}};g(function(q){m.records[q.name]={}});if(!o){return m}k(o,m);var p;do{p=false;j(n)}while(p);function n(q){if(!l(q,m)&&i(q,m)){k(q,m);p=true}}return m};function l(n,m){return a.indexOf(m.nodes,n)>=0}function i(o,m){var n=false;g(function(p){a.each(h(o,p)||[],function(q){m.records[p.name][q]&&(n=true)})});return n}function k(n,m){m.nodes.push(n);g(function(o){a.each(h(n,o)||[],function(p){m.records[o.name][p]=true})})}};f.defaultEmphasis=function(g,j){if(g){var i=g.emphasis=g.emphasis||{};var h=g.normal=g.normal||{};a.each(j,function(k){var l=a.retrieve(i[k],h[k]);if(l!=null){i[k]=l}})}};f.LABEL_OPTIONS=["position","show","textStyle","distance","formatter"];f.getDataItemValue=function(g){return g&&(g.value==null?g:g.value)};f.converDataValue=function(h,g){var i=g&&g.type;if(i==="ordinal"){return h}if(i==="time"&&!isFinite(h)&&h!=null&&h!=="-"){h=+e.parseDate(h)}return(h==null||h==="")?NaN:+h};f.dataFormatMixin={getDataParams:function(m,n){var k=this.getData(n);var j=this.seriesIndex;var o=this.name;var h=this.getRawValue(m,n);var l=k.getRawIndex(m);var g=k.getName(m,true);var i=k.getRawDataItem(m);return{componentType:this.mainType,componentSubType:this.subType,seriesType:this.mainType==="series"?this.subType:null,seriesIndex:j,seriesName:o,name:g,dataIndex:l,data:i,dataType:n,value:h,color:k.getItemVisual(m,"color"),$vars:["seriesName","name","value"]}},getFormattedLabel:function(j,g,h,m){g=g||"normal";var l=this.getData(h);var k=l.getItemModel(j);var n=this.getDataParams(j,h);if(m!=null&&a.isArray(n.value)){n.value=n.value[m]}var i=k.get(["label",g,"formatter"]);if(typeof i==="function"){n.status=g;return i(n)}else{if(typeof i==="string"){return b.formatTpl(i,n)}}},getRawValue:function(g,h){var j=this.getData(h);var i=j.getRawDataItem(g);if(i!=null){return(a.isObject(i)&&!a.isArray(i))?i.value:i}},formatTooltip:a.noop};f.mappingToExists=function(i,h){h=(h||[]).slice();var g=a.map(i||[],function(k,j){return{exist:k}});a.each(h,function(j,k){if(!a.isObject(j)){return}for(var l=0;l<g.length;l++){var m=g[l].exist;if(!g[l].option&&((j.id!=null&&m.id===j.id+"")||(j.name!=null&&!f.isIdInner(j)&&!f.isIdInner(m)&&m.name===j.name+""))){g[l].option=j;h[k]=null;break}}});a.each(h,function(j,k){if(!a.isObject(j)){return}var l=0;for(;l<g.length;l++){var m=g[l].exist;if(!g[l].option&&!f.isIdInner(m)&&j.id==null){g[l].option=j;break}}if(l>=g.length){g.push({option:j})}});return g};f.isIdInner=function(g){return a.isObject(g)&&g.id&&(g.id+"").indexOf("\0_ec_\0")===0};return f});