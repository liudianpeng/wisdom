define(function(i){var l=i("zrender/core/util");var u=i("zrender/tool/path");var r=Math.round;var q=i("zrender/graphic/Path");var t=i("zrender/tool/color");var o=i("zrender/core/matrix");var e=i("zrender/core/vector");var d=i("zrender/graphic/Gradient");var k={};k.Group=i("zrender/container/Group");k.Image=i("zrender/graphic/Image");k.Text=i("zrender/graphic/Text");k.Circle=i("zrender/graphic/shape/Circle");k.Sector=i("zrender/graphic/shape/Sector");k.Ring=i("zrender/graphic/shape/Ring");k.Polygon=i("zrender/graphic/shape/Polygon");k.Polyline=i("zrender/graphic/shape/Polyline");k.Rect=i("zrender/graphic/shape/Rect");k.Line=i("zrender/graphic/shape/Line");k.BezierCurve=i("zrender/graphic/shape/BezierCurve");k.Arc=i("zrender/graphic/shape/Arc");k.CompoundPath=i("zrender/graphic/CompoundPath");k.LinearGradient=i("zrender/graphic/LinearGradient");k.RadialGradient=i("zrender/graphic/RadialGradient");k.BoundingRect=i("zrender/core/BoundingRect");k.extendShape=function(x){return q.extend(x)};k.extendPath=function(y,x){return u.extendFromString(y,x)};k.makePath=function(F,x,E,D){var H=u.createFromString(F,x);var A=H.getBoundingRect();if(E){var y=A.width/A.height;if(D==="center"){var z=E.height*y;var G;if(z<=E.width){G=E.height}else{z=E.width;G=z/y}var C=E.x+E.width/2;var B=E.y+E.height/2;E.x=C-z/2;E.y=B-G/2;E.width=z;E.height=G}this.resizePath(H,E)}return H};k.mergePath=u.mergePath,k.resizePath=function(A,y){if(!A.applyTransform){return}var z=A.getBoundingRect();var x=z.calculateTransform(y);A.applyTransform(x)};k.subPixelOptimizeLine=function(A){var z=k.subPixelOptimize;var y=A.shape;var x=A.style.lineWidth;if(r(y.x1*2)===r(y.x2*2)){y.x1=y.x2=z(y.x1,x,true)}if(r(y.y1*2)===r(y.y2*2)){y.y1=y.y2=z(y.y1,x,true)}return A};k.subPixelOptimizeRect=function(D){var C=k.subPixelOptimize;var A=D.shape;var x=D.style.lineWidth;var B=A.x;var z=A.y;var y=A.width;var E=A.height;A.x=C(A.x,x,true);A.y=C(A.y,x,true);A.width=Math.max(C(B+y,x,false)-A.x,y===0?0:1);A.height=Math.max(C(z+E,x,false)-A.y,E===0?0:1);return D};k.subPixelOptimize=function(y,x,z){var A=r(y*2);return(A+r(x))%2===0?A/2:(A+(z?1:-1))/2};function c(x){return x!=null&&x!="none"}function w(x){return x instanceof d?x:t.lift(x,-0.1)}function a(y){if(y.__hoverStlDirty){var B=y.style.stroke;var A=y.style.fill;var z=y.__hoverStl;z.fill=z.fill||(c(A)?w(A):null);z.stroke=z.stroke||(c(B)?w(B):null);var C={};for(var x in z){if(z.hasOwnProperty(x)){C[x]=y.style[x]}}y.__normalStl=C;y.__hoverStlDirty=false}}function h(x){if(x.__isHover){return}a(x);x.setStyle(x.__hoverStl);x.z2+=1;x.__isHover=true}function n(y){if(!y.__isHover){return}var x=y.__normalStl;x&&y.setStyle(x);y.z2-=1;y.__isHover=false}function f(x){x.type==="group"?x.traverse(function(y){if(y.type!=="group"){h(y)}}):h(x)}function v(x){x.type==="group"?x.traverse(function(y){if(y.type!=="group"){n(y)}}):n(x)}function s(y,x){y.__hoverStl=y.hoverStyle||x||{};y.__hoverStlDirty=true;if(y.__isHover){a(y)}}function m(){!this.__isEmphasis&&f(this)}function j(){!this.__isEmphasis&&v(this)}function p(){this.__isEmphasis=true;f(this)}function g(){this.__isEmphasis=false;v(this)}k.setHoverStyle=function(x,y){x.type==="group"?x.traverse(function(z){if(z.type!=="group"){s(z,y)}}):s(x,y);x.on("mouseover",m).on("mouseout",j);x.on("emphasis",p).on("normal",g)};k.setText=function(B,A,x){var C=A.getShallow("position")||"inside";var z=C.indexOf("inside")>=0?"white":x;var y=A.getModel("textStyle");l.extend(B,{textDistance:A.getShallow("distance")||5,textFont:y.getFont(),textPosition:C,textFill:y.getTextColor()||z})};function b(G,y,D,B,E,z){if(typeof E==="function"){z=E;E=null}var F=G?"Update":"";var A=B&&B.getShallow("animationDuration"+F);var x=B&&B.getShallow("animationEasing"+F);var C=B&&B.getShallow("animationDelay"+F);if(typeof C==="function"){C=C(E)}B&&B.getShallow("animation")?y.animateTo(D,A,C||0,x,z):(y.attr(D),z&&z())}k.updateProps=l.curry(b,true);k.initProps=l.curry(b,false);k.getTransform=function(z,y){var x=o.identity([]);while(z&&z!==y){o.mul(x,z.getLocalTransform(),x);z=z.parent}return x};k.applyTransform=function(y,x,z){if(z){x=o.invert([],x)}return e.applyTransform([],y,x)};k.transformDirection=function(B,y,C){var x=(y[4]===0||y[5]===0||y[0]===0)?1:Math.abs(2*y[4]/y[0]);var A=(y[4]===0||y[5]===0||y[2]===0)?1:Math.abs(2*y[4]/y[2]);var z=[B==="left"?-x:B==="right"?x:0,B==="top"?-A:B==="bottom"?A:0];z=k.applyTransform(z,y,C);return Math.abs(z[0])>Math.abs(z[1])?(z[0]>0?"right":"left"):(z[1]>0?"bottom":"top")};return k});