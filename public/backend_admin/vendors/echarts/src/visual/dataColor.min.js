define(function(a){return function(d,b){var c=b.get("color");var e=0;b.eachRawSeriesByType(d,function(f){var g=f.get("color",true);var i=f.getRawData();if(!b.isSeriesFiltered(f)){var h=f.getData();h.each(function(j){var m=h.getItemModel(j);var o=h.getRawIndex(j);var l=h.getItemVisual(j,"color",true);if(!l){var n=g?g[o%g.length]:c[(o+e)%c.length];var k=m.get("itemStyle.normal.color")||n;i.setItemVisual(o,"color",k);h.setItemVisual(j,"color",k)}else{i.setItemVisual(o,"color",l)}})}e+=i.count()})}});