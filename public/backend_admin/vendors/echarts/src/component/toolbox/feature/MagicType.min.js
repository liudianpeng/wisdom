define(function(d){var b=d("zrender/core/util");function a(h){this.model=h}a.defaultOption={show:true,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z",tiled:"M2.3,2.2h22.8V25H2.3V2.2z M35,2.2h22.8V25H35V2.2zM2.3,35h22.8v22.8H2.3V35z M35,35h22.8v22.8H35V35z"},title:{line:"åˆ‡æ¢ä¸ºæŠ˜çº¿å›¾",bar:"åˆ‡æ¢ä¸ºæŸ±çŠ¶å›¾",stack:"åˆ‡æ¢ä¸ºå †å?",tiled:"åˆ‡æ¢ä¸ºå¹³é“?"},option:{},seriesIndex:{}};var f=a.prototype;f.getIcons=function(){var h=this.model;var j=h.get("icon");var i={};b.each(h.get("type"),function(k){if(j[k]){i[k]=j[k]}});return i};var c={line:function(i,k,h,j){if(i==="bar"){return b.merge({id:k,type:"line",data:h.get("data"),stack:h.get("stack"),markPoint:h.get("markPoint"),markLine:h.get("markLine")},j.get("option.line")||{},true)}},bar:function(i,k,h,j){if(i==="line"){return b.merge({id:k,type:"bar",data:h.get("data"),stack:h.get("stack"),markPoint:h.get("markPoint"),markLine:h.get("markLine")},j.get("option.bar")||{},true)}},stack:function(i,k,h,j){if(i==="line"||i==="bar"){return b.merge({id:k,stack:"__ec_magicType_stack__"},j.get("option.stack")||{},true)}},tiled:function(i,k,h,j){if(i==="line"||i==="bar"){return b.merge({id:k,stack:""},j.get("option.tiled")||{},true)}}};var g=[["line","bar"],["stack","tiled"]];f.onclick=function(h,l,k){var j=this.model;var i=j.get("seriesIndex."+k);if(!c[k]){return}var m={series:[]};var n=function(p){var r=p.subType;var v=p.id;var w=c[k](r,v,p,j);if(w){b.defaults(w,p.option);m.series.push(w)}var q=p.coordinateSystem;if(q&&q.type==="cartesian2d"&&(k==="line"||k==="bar")){var t=q.getAxesByScale("ordinal")[0];if(t){var u=t.dim;var x=p.get(u+"AxisIndex");var o=u+"Axis";m[o]=m[o]||[];for(var s=0;s<=x;s++){m[o][x]=m[o][x]||{}}m[o][x].boundaryGap=k==="bar"?true:false}}};b.each(g,function(o){if(b.indexOf(o,k)>=0){b.each(o,function(p){j.setIconStatus(p,"normal")})}});j.setIconStatus(k,"emphasis");h.eachComponent({mainType:"series",query:i==null?null:{seriesIndex:i}},n);l.dispatchAction({type:"changeMagicType",currentType:k,newOption:m})};var e=d("../../../echarts");e.registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(i,h){h.mergeOption(i.newOption)});d("../featureManager").register("magicType",a);return a});