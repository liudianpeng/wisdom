define(function(b){var c=b("zrender/core/env");function a(e){this.model=e}a.defaultOption={show:true,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:"ä¿å­˜ä¸ºå›¾ç‰?",type:"png",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:["å³é”®å¦å­˜ä¸ºå›¾ç‰?"]};a.prototype.unusable=!c.canvasSupported;var d=a.prototype;d.onclick=function(k,l){var j=this.model;var n=j.get("name")||k.get("title.0.text")||"echarts";var h=document.createElement("a");var m=j.get("type",true)||"png";h.download=n+"."+m;h.target="_blank";var e=l.getConnectedDataURL({type:m,backgroundColor:j.get("backgroundColor",true)||k.get("backgroundColor")||"#fff",excludeComponents:j.get("excludeComponents"),pixelRatio:j.get("pixelRatio")});h.href=e;if(typeof MouseEvent==="function"){var o=new MouseEvent("click",{view:window,bubbles:true,cancelable:false});h.dispatchEvent(o)}else{var f=j.get("lang");var i='<body style="margin:0;"><img src="'+e+'" style="max-width:100%;" title="'+((f&&f[0])||"")+'" /></body>';var g=window.open();g.document.write(i)}};b("../featureManager").register("saveAsImage",a);return a});