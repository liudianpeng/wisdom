define(function(c){var d=c("zrender/core/util");var g=c("zrender/core/env");var e=c("../../echarts");var k=c("../../util/model");var b=c("./AxisProxy");var j=d.each;var a=k.eachAxisDim;var f=e.extendComponentModel({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,angleAxisIndex:null,radiusAxisIndex:null,filterMode:"filter",throttle:100,start:0,end:100,startValue:null,endValue:null},init:function(n,m,l){this._dataIntervalByAxis={};this._dataInfo={};this._axisProxies={};this.textStyleModel;var o=i(n);this.mergeDefaultAndTheme(n,l);this.doInit(o)},mergeOption:function(m){var l=i(m);d.merge(this.option,m,true);this.doInit(l)},doInit:function(m){var l=this.option;if(!g.canvasSupported){l.realtime=false}h("start","startValue",m,l);h("end","endValue",m,l);this.textStyleModel=this.getModel("textStyle");this._resetTarget();this._giveAxisProxies()},_giveAxisProxies:function(){var l=this._axisProxies;this.eachTargetAxis(function(n,p,r,m){var o=this.dependentModels[n.axis][p];var q=o.__dzAxisProxy||(o.__dzAxisProxy=new b(n.name,p,this,m));l[n.name+"_"+p]=q},this)},_resetTarget:function(){var l=this.option;var m=this._judgeAutoMode();a(function(n){var o=n.axisIndex;l[o]=k.normalizeToArray(l[o])},this);if(m==="axisIndex"){this._autoSetAxisIndex()}else{if(m==="orient"){this._autoSetOrient()}}},_judgeAutoMode:function(){var m=this.option;var n=false;a(function(o){if(m[o.axisIndex]!=null){n=true}},this);var l=m.orient;if(l==null&&n){return"orient"}else{if(!n){if(l==null){m.orient="horizontal"}return"axisIndex"}}},_autoSetAxisIndex:function(){var o=true;var m=this.get("orient",true);var n=this.option;if(o){var l=m==="vertical"?{dim:"y",axisIndex:"yAxisIndex",axis:"yAxis"}:{dim:"x",axisIndex:"xAxisIndex",axis:"xAxis"};if(this.dependentModels[l.axis].length){n[l.axisIndex]=[0];o=false}}if(o){a(function(q){if(!o){return}var t=[];var s=this.dependentModels[q.axis];if(s.length&&!t.length){for(var r=0,p=s.length;r<p;r++){if(s[r].get("type")==="category"){t.push(r)}}}n[q.axisIndex]=t;if(t.length){o=false}},this)}if(o){this.ecModel.eachSeries(function(p){if(this._isSeriesHasAllAxesTypeOf(p,"value")){a(function(q){var s=n[q.axisIndex];var r=p.get(q.axisIndex);if(d.indexOf(s,r)<0){s.push(r)}})}},this)}},_autoSetOrient:function(){var l;this.eachTargetAxis(function(m){!l&&(l=m.name)},this);this.option.orient=l==="y"?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(m,l){var n=true;a(function(o){var q=m.get(o.axisIndex);var p=this.dependentModels[o.axis][q];if(!p||p.get("type")!==l){n=false}},this);return n},getFirstTargetAxisModel:function(){var l;a(function(m){if(l==null){var n=this.get(m.axisIndex);if(n.length){l=this.dependentModels[m.axis][n[0]]}}},this);return l},eachTargetAxis:function(n,m){var l=this.ecModel;a(function(o){j(this.get(o.axisIndex),function(p){n.call(m,o,p,this,l)},this)},this)},getAxisProxy:function(m,l){return this._axisProxies[m+"_"+l]},setRawRange:function(l){j(["start","end","startValue","endValue"],function(m){this.option[m]=l[m]},this)},getPercentRange:function(){var l=this.findRepresentativeAxisProxy();if(l){return l.getDataPercentWindow()}},getValueRange:function(m,l){if(m==null&&l==null){var n=this.findRepresentativeAxisProxy();if(n){return n.getDataValueWindow()}}else{return this.getAxisProxy(m,l).getDataValueWindow()}},findRepresentativeAxisProxy:function(){var m=this._axisProxies;for(var l in m){if(m.hasOwnProperty(l)&&m[l].hostedBy(this)){return m[l]}}for(var l in m){if(m.hasOwnProperty(l)&&!m[l].hostedBy(this)){return m[l]}}}});function i(m){var l={};j(["start","end","startValue","endValue"],function(n){l[n]=m[n]});return l}function h(o,m,n,l){if(n[m]!=null&&n[o]==null){l[o]=null}}return f});