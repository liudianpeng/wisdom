define(function(b){var c=b("./DataZoomView");var f=b("zrender/core/util");var a=b("../helper/sliderMove");var e=b("./roams");var k=f.bind;var d=c.extend({type:"dataZoom.inside",init:function(l,m){this._range},render:function(q,l,n,o){d.superApply(this,"render",arguments);if(e.shouldRecordRange(o,q.id)){this._range=q.getPercentRange()}var m=this.getTargetInfo().cartesians;var p=f.map(m,function(r){return e.generateCoordId(r.model)});f.each(m,function(r){var s=r.model;e.register(n,{coordId:e.generateCoordId(s),allCoordIds:p,coordinateSystem:s.coordinateSystem,dataZoomId:q.id,throttleRage:q.get("throttle",true),panGetRange:k(this._onPan,this,r),zoomGetRange:k(this._onZoom,this,r)})},this)},remove:function(){e.unregister(this.api,this.dataZoomModel.id);d.superApply(this,"remove",arguments);this._range=null},dispose:function(){e.unregister(this.api,this.dataZoomModel.id);d.superApply(this,"dispose",arguments);this._range=null},_onPan:function(o,m,n,l){return(this._range=h([n,l],this._range,m,o))},_onZoom:function(o,l,p,n,m){var q=this.dataZoomModel;if(q.option.zoomLock){return this._range}return(this._range=g(1/p,[n,m],this._range,l,o,q))}});function h(l,n,m,p){n=n.slice();var o=p.axisModels[0];if(!o){return}var r=i(l,o,m);var q=r.signal*(n[1]-n[0])*r.pixel/r.pixelLength;a(q,n,[0,100],"rigid");return n}function g(n,s,p,q,l,o){p=p.slice();var u=l.axisModels[0];if(!u){return}var t=i(s,u,q);var r=t.pixel-t.pixelStart;var m=r/t.pixelLength*(p[1]-p[0])+p[0];n=Math.max(n,0);p[0]=(p[0]-m)*n+m;p[1]=(p[1]-m)*n+m;return j(p)}function i(q,n,l){var o=n.axis;var p=l.rectProvider();var m={};if(o.dim==="x"){m.pixel=q[0];m.pixelLength=p.width;m.pixelStart=p.x;m.signal=o.inverse?1:-1}else{m.pixel=q[1];m.pixelLength=p.height;m.pixelStart=p.y;m.signal=o.inverse?-1:1}return m}function j(l){var m=[0,100];!(l[0]<=m[1])&&(l[0]=m[1]);!(l[1]<=m[1])&&(l[1]=m[1]);!(l[0]>=m[0])&&(l[0]=m[0]);!(l[1]>=m[0])&&(l[1]=m[0]);return l}return d});