define(function(c){var e=c("../../util/layout");var a=c("zrender/core/util");var b=c("../../data/DataDiffer");var d={getItemAlign:function(q,n,s){var m=q.option;var f=m.align;if(f!=null&&f!=="auto"){return f}var p={width:n.getWidth(),height:n.getHeight()};var h=m.orient==="horizontal"?1:0;var r=[["left","right","width"],["top","bottom","height"]];var g=r[h];var j=[0,null,10];var l={};for(var k=0;k<3;k++){l[r[1-h][k]]=j[k];l[g[k]]=k===2?s[0]:m[g[k]]}var t=[["x","width",3],["y","height",0]][h];var o=e.getLayoutRect(l,p,m.padding);return g[(o.margin[t[2]]||0)+o[t[0]]+o[t[1]]*0.5<p[t[1]]*0.5?0:1]},convertDataIndicesToBatch:function(g){var f=[];a.each(g,function(h){a.each(h.dataIndices,function(i){f.push({seriesId:h.seriesId,dataIndex:i})})});return f},removeDuplicateBatch:function(j,i){var g=[[],[]];(new b(j,i,h,h)).add(k).update(a.noop).remove(f).execute();function h(l){return l.seriesId+"-"+l.dataIndex}function k(l){g[1].push(i[l])}function f(l){g[0].push(j[l])}return g}};return d});