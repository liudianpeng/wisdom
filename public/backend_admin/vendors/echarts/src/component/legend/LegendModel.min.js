define(function(b){var a=b("zrender/core/util");var d=b("../../model/Model");var c=b("../../echarts").extendComponentModel({type:"legend",dependencies:["series"],layoutMode:{type:"box",ignoreSize:true},init:function(k,i,f){this.mergeDefaultAndTheme(k,f);k.selected=k.selected||{};this._updateData(f);var g=this._data;var j=this.option.selected;if(g[0]&&this.get("selectedMode")==="single"){var e=false;for(var h in j){if(j[h]){this.select(h);e=true}}!e&&this.select(g[0].get("name"))}},mergeOption:function(e){c.superCall(this,"mergeOption",e);this._updateData(this.ecModel)},_updateData:function(e){var f=a.map(this.get("data")||[],function(h){if(typeof h==="string"){h={name:h}}return new d(h,this,this.ecModel)},this);this._data=f;var g=a.map(e.getSeries(),function(h){return h.name});e.eachSeries(function(h){if(h.legendDataProvider){var i=h.legendDataProvider();g=g.concat(i.mapArray(i.getName))}});this._availableNames=g},getData:function(){return this._data},select:function(e){var f=this.option.selected;var h=this.get("selectedMode");if(h==="single"){var g=this._data;a.each(g,function(i){f[i.get("name")]=false})}f[e]=true},unSelect:function(e){if(this.get("selectedMode")!=="single"){this.option.selected[e]=false}},toggleSelected:function(e){var f=this.option.selected;if(!(e in f)){f[e]=true}this[f[e]?"unSelect":"select"](e)},isSelected:function(e){var f=this.option.selected;return !((e in f)&&!f[e])&&a.indexOf(this._availableNames,e)>=0},defaultOption:{zlevel:0,z:4,show:true,orient:"horizontal",left:"center",top:"top",align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,textStyle:{color:"#333"},selectedMode:true}});return c});