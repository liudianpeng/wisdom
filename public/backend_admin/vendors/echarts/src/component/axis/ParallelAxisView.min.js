define(function(d){var b=d("zrender/core/util");var a=d("./AxisBuilder");var g=d("../helper/SelectController");var e=["axisLine","axisLabel","axisTick","axisName"];var f=d("../../echarts").extendComponentView({type:"parallelAxis",_selectController:null,render:function(q,k,l,n){if(c(q,k,n)){return}this.axisModel=q;this.api=l;this.group.removeAll();if(!q.get("show")){return}var j=k.getComponent("parallel",q.get("parallelIndex")).coordinateSystem;var h=q.getAreaSelectStyle();var o=h.width;var r=j.getAxisLayout(q.axis.dim);var p=b.extend({strokeContainThreshold:o,axisLineSilent:!(o>0)},r);var m=new a(q,p);b.each(e,m.add,m);var i=m.getGroup();this.group.add(i);this._buildSelectController(i,h,q,l)},_buildSelectController:function(n,i,j,l){var k=j.axis;var m=this._selectController;if(!m){m=this._selectController=new g("line",l.getZr(),i);m.on("selected",b.bind(this._onSelected,this))}m.enable(n);var h=b.map(j.activeIntervals,function(o){return[k.dataToCoord(o[0],true),k.dataToCoord(o[1],true)]});m.update(h)},_onSelected:function(h){var j=this.axisModel;var k=j.axis;var i=b.map(h,function(l){return[k.coordToData(l[0],true),k.coordToData(l[1],true)]});this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:j.id,intervals:i})},remove:function(){this._selectController&&this._selectController.disable()},dispose:function(){if(this._selectController){this._selectController.dispose();this._selectController=null}}});function c(i,h,j){return j&&j.type==="axisAreaSelect"&&h.findComponents({mainType:"parallelAxis",query:j})[0]===i}return f});