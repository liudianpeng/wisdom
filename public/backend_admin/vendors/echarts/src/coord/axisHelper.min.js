define(function(d){var g=d("../scale/Ordinal");var h=d("../scale/Interval");d("../scale/Time");d("../scale/Log");var e=d("../scale/Scale");var c=d("../util/number");var b=d("zrender/core/util");var f=d("zrender/contain/text");var a={};a.getScaleExtent=function(j,n){var l=j.scale;var o=l.getExtent();var r=o[1]-o[0];if(l.type==="ordinal"){if(!isFinite(r)){return[0,0]}else{return o}}var m=n.getMin?n.getMin():n.get("min");var q=n.getMax?n.getMax():n.get("max");var s=n.getNeedCrossZero?n.getNeedCrossZero():!n.get("scale");var i=n.get("boundaryGap");if(!b.isArray(i)){i=[i||0,i||0]}i[0]=c.parsePercent(i[0],1);i[1]=c.parsePercent(i[1],1);var k=true;var p=true;if(m==null){m=o[0]-i[0]*r;k=false}if(q==null){q=o[1]+i[1]*r;p=false}if(m==="dataMin"){m=o[0]}if(q==="dataMax"){q=o[1]}if(s){if(m>0&&q>0&&!k){m=0}if(m<0&&q<0&&!p){q=0}}return[m,q]};a.niceScaleExtent=function(k,n){var l=k.scale;var p=a.getScaleExtent(k,n);var m=(n.getMin?n.getMin():n.get("min"))!=null;var o=(n.getMax?n.getMax():n.get("max"))!=null;var i=n.get("splitNumber");l.setExtent(p[0],p[1]);l.niceExtent(i,m,o);var q=n.get("minInterval");if(isFinite(q)&&!m&&!o&&l.type==="interval"){var j=l.getInterval();var r=Math.max(Math.abs(j),q)/j;p=l.getExtent();l.setExtent(r*p[0],p[1]*r);l.niceExtent(i)}var j=n.get("interval");if(j!=null){l.setInterval&&l.setInterval(j)}};a.createScaleByModel=function(j,i){i=i||j.get("type");if(i){switch(i){case"category":return new g(j.getCategories(),[Infinity,-Infinity]);case"value":return new h();default:return(e.getClass(i)||h).create(j)}}};a.ifAxisCrossZero=function(k){var l=k.scale.getExtent();var j=l[0];var i=l[1];return !((j>0&&i>0)||(j<0&&i<0))};a.getAxisLabelInterval=function(p,r,o,t){var l;var m=0;var j=0;var n=1;if(r.length>40){n=Math.round(r.length/40)}for(var q=0;q<p.length;q+=n){var k=p[q];var s=f.getBoundingRect(r[q],o,"center","top");s[t?"x":"y"]+=k;s[t?"width":"height"]*=1.5;if(!l){l=s.clone()}else{if(l.intersect(s)){j++;m=Math.max(m,j)}else{l.union(s);j=0}}}if(m===0&&n>1){return n}return m*n};a.getFormattedLabels=function(j,i){var l=j.scale;var m=l.getTicksLabels();var k=l.getTicks();if(typeof i==="string"){i=(function(n){return function(o){return n.replace("{value}",o)}})(i);return b.map(m,i)}else{if(typeof i==="function"){return b.map(k,function(o,n){return i(j.type==="category"?l.getLabel(o):o,n)},this)}else{return m}}};return a});