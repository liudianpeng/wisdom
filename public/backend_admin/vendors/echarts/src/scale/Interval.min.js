define(function(c){var b=c("../util/number");var a=c("../util/format");var d=c("./Scale");var e=Math.floor;var f=Math.ceil;var g=d.extend({type:"interval",_interval:0,setExtent:function(j,h){var i=this._extent;if(!isNaN(j)){i[0]=parseFloat(j)}if(!isNaN(h)){i[1]=parseFloat(h)}},unionExtent:function(h){var i=this._extent;h[0]<i[0]&&(i[0]=h[0]);h[1]>i[1]&&(i[1]=h[1]);g.prototype.setExtent.call(this,i[0],i[1])},getInterval:function(){if(!this._interval){this.niceTicks()}return this._interval},setInterval:function(h){this._interval=h;this._niceExtent=this._extent.slice()},getTicks:function(){if(!this._interval){this.niceTicks()}var h=this._interval;var l=this._extent;var m=[];var j=10000;if(h){var k=this._niceExtent;if(l[0]<k[0]){m.push(l[0])}var i=k[0];while(i<=k[1]){m.push(i);i=b.round(i+h);if(m.length>j){return[]}}if(l[1]>k[1]){m.push(l[1])}}return m},getTicksLabels:function(){var k=[];var j=this.getTicks();for(var h=0;h<j.length;h++){k.push(this.getLabel(j[h]))}return k},getLabel:function(h){return a.addCommas(h)},niceTicks:function(l){l=l||5;var j=this._extent;var i=j[1]-j[0];if(!isFinite(i)){return}if(i<0){i=-i;j.reverse()}var k=b.nice(i/l,true);var h=[b.round(f(j[0]/k)*k),b.round(e(j[1]/k)*k)];this._interval=k;this._niceExtent=h},niceExtent:function(n,m,i){var l=this._extent;if(l[0]===l[1]){if(l[0]!==0){var h=l[0]/2;l[0]-=h;l[1]+=h}else{l[1]=1}}var k=l[1]-l[0];if(!isFinite(k)){l[0]=0;l[1]=1}this.niceTicks(n);var j=this._interval;if(!m){l[0]=b.round(e(l[0]/j)*j)}if(!i){l[1]=b.round(f(l[1]/j)*j)}}});g.create=function(){return new g()};return g});