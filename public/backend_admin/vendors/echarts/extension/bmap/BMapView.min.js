define(function(a){return a("echarts").extendComponentView({type:"bmap",render:function(k,g,j){var n=true;var h=k.getBMap();var c=j.getZr().painter.getViewportRoot();var f=k.coordinateSystem;var i=function(p,q){if(n){return}var r=c.parentNode.parentNode.parentNode;var o=[-parseInt(r.style.left,10)||0,-parseInt(r.style.top,10)||0];c.style.left=o[0]+"px";c.style.top=o[1]+"px";f.setMapOffset(o);k.__mapOffset=o;j.dispatchAction({type:"bmapRoam"})};function e(){if(n){return}j.dispatchAction({type:"bmapRoam"})}h.removeEventListener("moving",this._oldMoveHandler);h.removeEventListener("zoomend",this._oldZoomEndHandler);h.addEventListener("moving",i);h.addEventListener("zoomend",e);this._oldMoveHandler=i;this._oldZoomEndHandler=e;var m=k.get("roam");if(m&&m!=="scale"){h.enableDragging()}else{h.disableDragging()}if(m&&m!=="move"){h.enableScrollWheelZoom();h.enableDoubleClickZoom();h.enablePinchToZoom()}else{h.disableScrollWheelZoom();h.disableDoubleClickZoom();h.disablePinchToZoom()}var b=k.__mapStyle;var d=k.get("mapStyle")||{};var l=JSON.stringify(d);if(JSON.stringify(b)!==l){h.setMapStyle(d);k.__mapStyle=JSON.parse(l)}n=false}})});