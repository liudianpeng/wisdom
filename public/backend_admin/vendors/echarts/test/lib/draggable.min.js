(function(b){var a=4;var d=b.jQuery;b.draggable={init:function(p,n,f){f=f||{};var m=n?d.proxy(n.resize,n):function(){};if(f.throttle){m=c(m,f.throttle,true,false)}var p=d(p);d(".draggable-control").remove();var r=d('<div class="draggable-control">DRAG<span class="draggable-label"></span></div>');r.css({position:"absolute","border-radius":"30px",width:"60px",height:"60px","line-height":"60px","text-align":"center",background:"#333",color:"#fff",cursor:"pointer","font-size":"18px","box-shadow":"0 0 5px #333","-webkit-user-select":"none","user-select":"none"});var o=r.find(".draggable-label");o.css({display:"block",position:"absolute",color:"#000","font-size":"12px","text-align":"center",left:0,top:"65px",width:"60px","line-height":1});p.css({position:"absolute",left:p[0].offsetLeft+"px",top:p[0].offsetTop+"px",width:p[0].offsetWidth+"px",height:p[0].offsetHeight+"px","border-style":"solid","border-color":"#ddd","border-width":a+"px",padding:0,margin:0});p.parent().append(r);var l=r[0].offsetWidth;var h=p.css("box-sizing");var j=h==="border-box"?2*a:0;var e=f.width||(p.width()+j);var k=f.height||(p.height()+j);var i=p.offset();g(i.left+e+a,i.top+k+a,true);var q=false;r.on("mousedown",function(){q=true});d(document).on("mousemove",function(s){if(q){g(s.pageX,s.pageY)}});d(document).on("mouseup",function(){q=false});function g(s,A,z){var v=p.offset();var t=p.position();var u=s-v.left-a;var w=A-v.top-a;if(z||!f.lockX){r.css("left",(t.left+u+a-l/2)+"px");p.css("width",(u+j)+"px")}if(z||!f.lockY){r.css("top",(t.top+w+a-l/2)+"px");p.css("height",(w+j)+"px")}o.text(Math.round(u)+" x "+Math.round(w));m()}}};function c(p,k,m,s){var h=(new Date()).getTime();var r=0;var g=0;var f=null;var q;var t;var o;var l=typeof p==="function";k=k||0;if(l){return e()}else{var n=[];for(var j=0;j<p.length;j++){n[j]=e(j)}return n}function e(v){function u(){g=(new Date()).getTime();f=null;(l?p:p[v]).apply(t,o||[])}var i=function(){h=(new Date()).getTime();t=this;o=arguments;q=h-(s?r:g)-k;clearTimeout(f);if(s){if(m){f=setTimeout(u,k)}else{if(q>=0){u()}}}else{if(q>=0){u()}else{if(m){f=setTimeout(u,-q)}}}r=h};i.clear=function(){if(f){clearTimeout(f);f=null}};return i}}})(window);