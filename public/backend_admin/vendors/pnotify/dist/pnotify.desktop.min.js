(function(a,b){"function"===typeof define&&define.amd?define("pnotify.desktop",["jquery","pnotify"],b):"object"===typeof exports&&"undefined"!==typeof module?module.exports=b(require("jquery"),require("./pnotify")):b(a.jQuery,a.PNotify)})(this,function(b,h){var g,a=function(d,c){a="Notification" in window?function(f,e){return new Notification(f,e)}:"mozNotification" in navigator?function(f,e){return navigator.mozNotification.createNotification(f,e.body,e.icon).show()}:"webkitNotifications" in window?function(f,e){return window.webkitNotifications.createNotification(e.icon,f,e.body)}:function(f,e){return null};return a(d,c)};h.prototype.options.desktop={desktop:!1,fallback:!0,icon:null,tag:null};h.prototype.modules.desktop={tag:null,icon:null,genNotice:function(d,c){this.icon=null===c.icon?"http://sciactive.com/pnotify/includes/desktop/"+d.options.type+".png":!1===c.icon?null:c.icon;if(null===this.tag||null!==c.tag){this.tag=null===c.tag?"PNotify-"+Math.round(1000000*Math.random()):c.tag}d.desktop=a(d.options.title,{icon:this.icon,body:c.text||d.options.text,tag:this.tag});!("close" in d.desktop)&&"cancel" in d.desktop&&(d.desktop.close=function(){d.desktop.cancel()});d.desktop.onclick=function(){d.elem.trigger("click")};d.desktop.onclose=function(){"closing"!==d.state&&"closed"!==d.state&&d.remove()}},init:function(d,c){c.desktop&&(g=h.desktop.checkPermission(),0!==g?c.fallback||(d.options.auto_display=!1):this.genNotice(d,c))},update:function(e,d,f){0!==g&&d.fallback||!d.desktop||this.genNotice(e,d)},beforeOpen:function(d,c){0!==g&&c.fallback||!c.desktop||d.elem.css({left:"-10000px"}).removeClass("ui-pnotify-in")},afterOpen:function(d,c){0!==g&&c.fallback||!c.desktop||(d.elem.css({left:"-10000px"}).removeClass("ui-pnotify-in"),"show" in d.desktop&&d.desktop.show())},beforeClose:function(d,c){0!==g&&c.fallback||!c.desktop||d.elem.css({left:"-10000px"}).removeClass("ui-pnotify-in")},afterClose:function(d,c){0!==g&&c.fallback||!c.desktop||(d.elem.css({left:"-10000px"}).removeClass("ui-pnotify-in"),"close" in d.desktop&&d.desktop.close())}};h.desktop={permission:function(){"undefined"!==typeof Notification&&"requestPermission" in Notification?Notification.requestPermission():"webkitNotifications" in window&&window.webkitNotifications.requestPermission()},checkPermission:function(){return"undefined"!==typeof Notification&&"permission" in Notification?"granted"===Notification.permission?0:1:"webkitNotifications" in window?0==window.webkitNotifications.checkPermission()?0:1:1}};g=h.desktop.checkPermission()});